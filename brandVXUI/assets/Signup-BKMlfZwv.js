import{r as s,j as e,L as k}from"./react-vendor--lxKGBiW.js";import{s as o,b as d}from"./index-Bk3Do8do.js";import{C as N}from"./CenteredCard-8vifPehV.js";import"./radix-Dc_FVRD7.js";import"./sentry-ZUDTCraJ.js";import"./howler-DHXmObXC.js";import"./physics-DQSz9XbC.js";import"./analytics-BPch_qa6.js";import"./supabase-CZcX4Eou.js";function O(){const[u,g]=s.useState(""),[p,b]=s.useState(""),[n,f]=s.useState(""),[x,w]=s.useState(""),[i,h]=s.useState(!1),[v,_]=s.useState(!1),y=!1,j=async t=>{t.preventDefault(),h(!0);try{const a=`${window.location.origin}/auth/callback?next=/onboarding`,{error:r}=await o.auth.signUp({email:n,password:x,options:{data:{name:u,business:p},emailRedirectTo:a}});if(r)throw r;_(!0);try{localStorage.setItem("bvx_offer_pending","1")}catch{}try{const l=localStorage.getItem("bvx_ref"),m=(await o.auth.getUser()).data.user?.id;if(l&&m){const{data:c}=await o.from("referral_codes").select("user_id, code").eq("code",l).single();if(c?.user_id){await o.from("referrals").insert({ref_code:c.code,referrer_user_id:c.user_id,referred_user_id:m,landing_url:window.location.href});try{d("referral_attributed",{ref:l})}catch{}}}}catch{}}catch(a){alert(String(a.message||a))}finally{h(!1)}};return e.jsxs(N,{children:[e.jsx("h1",{className:"text-[40px] md:text-[56px] leading-[1.05] font-extrabold text-slate-900 text-center [text-shadow:0_1px_2px_rgba(0,0,0,0.06)]",children:"Create your account"}),e.jsx("p",{className:"text-slate-600 mt-1 text-[16px] md:text-[18px] text-center [text-shadow:0_1px_1px_rgba(0,0,0,0.04)]",children:"Start in minutes—your dashboard is ready."}),v?e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-amber-50 border border-amber-200 text-amber-900 text-sm",children:["We sent a confirmation link to ",e.jsx("b",{children:n||"your email"}),". After you click it, we’ll open your workspace automatically."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{className:"text-sm text-pink-600 hover:underline",href:"https://mail.google.com",target:"_blank",rel:"noreferrer",children:"Open Gmail"}),e.jsx("span",{className:"text-slate-300",children:"—"}),e.jsx("button",{type:"button",className:"text-sm text-slate-700 hover:underline",onClick:async()=>{try{const t=`${window.location.origin}/auth/callback?next=/onboarding`;await o.auth.resend({type:"signup",email:n,options:{emailRedirectTo:t}})}catch{}},children:"Resend verification"}),e.jsx("span",{className:"text-slate-300",children:"—"}),e.jsx("button",{type:"button",className:"text-sm text-slate-700 hover:underline",onClick:async()=>{try{const t=`${window.location.origin}/auth/callback?next=/onboarding`,{data:a,error:r}=await o.auth.signInWithOAuth({provider:"google",options:{redirectTo:t}});if(r){alert(String(r.message||r));return}a&&a.url&&window.location.assign(a.url)}catch(t){alert(String(t?.message||t))}},children:"Use Google instead"})]})]}):e.jsxs("form",{onSubmit:j,className:"mt-6 space-y-4","aria-live":"polite",role:"status",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-700 pl-[10px]",children:"Your name"}),e.jsx("input",{required:!0,value:u,onChange:t=>g(t.target.value),autoComplete:"name",className:"mt-1 w-full h-12 md:h-14 border border-slate-300/60 rounded-xl px-3 bg-white/80 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-pink-300/60 focus:border-transparent",placeholder:"Alex Rivera"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-700 pl-[10px]",children:"Business name"}),e.jsx("input",{required:!0,value:p,onChange:t=>b(t.target.value),autoComplete:"organization",className:"mt-1 w-full h-12 md:h-14 border border-slate-300/60 rounded-xl px-3 bg-white/80 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-pink-300/60 focus:border-transparent",placeholder:"Vivid Studio"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-700 pl-[10px]",children:"Email"}),e.jsx("input",{type:"email",required:!0,value:n,onChange:t=>f(t.target.value),autoComplete:"email",className:"mt-1 w-full h-12 md:h-14 border border-slate-300/60 rounded-xl px-3 bg-white/80 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-pink-300/60 focus:border-transparent",placeholder:"you@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-700 pl-[10px]",children:"Password"}),e.jsx("input",{type:"password",required:!0,value:x,onChange:t=>w(t.target.value),autoComplete:"new-password",className:"mt-1 w-full h-12 md:h-14 border border-slate-300/60 rounded-xl px-3 bg-white/80 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-pink-300/60 focus:border-transparent",placeholder:"••••••••"})]}),e.jsxs("button",{disabled:i,"aria-label":"Create account",className:"relative w-full py-4 rounded-full bg-gradient-to-b from-pink-500 to-violet-500 text-white text-[18px] md:text-[20px] hover:from-pink-600 hover:to-violet-600 transition shadow-[inset_0_2px_0_rgba(255,255,255,.35),0_40px_80px_-32px_rgba(192,132,252,.35)]",children:[e.jsx("span",{className:"absolute inset-x-0 -top-1 h-1.5 bg-white/40 blur-[2px] pointer-events-none","aria-hidden":!0}),i?"Creating…":"Create account"]})]}),e.jsxs("div",{className:"my-4 grid grid-cols-1 gap-2",children:[e.jsx("button",{disabled:i,className:"w-full h-12 md:h-14 rounded-xl border border-slate-300/60 bg-white hover:bg-slate-50",onClick:async()=>{try{d("signup_oauth_click",{provider:"google"})}catch{}try{localStorage.setItem("bvx_offer_pending","1")}catch{}try{const t=`${window.location.origin}/auth/callback?next=/onboarding`;try{localStorage.setItem("bvx_auth_in_progress","1")}catch{}const{data:a,error:r}=await o.auth.signInWithOAuth({provider:"google",options:{redirectTo:t}});if(r){alert(String(r.message||r));return}a&&a.url&&window.location.assign(a.url)}catch(t){alert(String(t?.message||t))}},children:"Continue with Google"}),y&&e.jsx("button",{disabled:i,className:"w-full h-12 md:h-14 rounded-xl border border-slate-300/60 bg-white hover:bg-slate-50",onClick:async()=>{try{d("signup_oauth_click",{provider:"apple"})}catch{}try{localStorage.setItem("bvx_offer_pending","1")}catch{}await o.auth.signInWithOAuth({provider:"apple",options:{redirectTo:`${window.location.origin}/onboarding?offer=1`}})},children:"Continue with Apple"})]}),e.jsxs("p",{className:"text-sm text-slate-600 mt-4 pl-[10px]",children:["Already have an account? ",e.jsx(k,{to:"/login",className:"text-pink-600 hover:underline",children:"Sign in"})]})]})}export{O as default};
