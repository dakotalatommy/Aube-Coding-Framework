import{j as e,r as l,e as E,u as W}from"./react-vendor--lxKGBiW.js";import{B as S}from"./Button-DlSz7573.js";import{C as L}from"./CenteredCard-8vifPehV.js";import{a as w,g as N,u as M,b as B}from"./index-Bk3Do8do.js";import{A as q,m as O}from"./motion-37lkt-10.js";import"./radix-Dc_FVRD7.js";import"./sentry-ZUDTCraJ.js";import"./howler-DHXmObXC.js";import"./physics-DQSz9XbC.js";import"./analytics-BPch_qa6.js";import"./supabase-CZcX4Eou.js";async function P(x,u){try{const n="bvxo:"+x,i={...JSON.parse(localStorage.getItem(n)||"{}"),...u||{}};localStorage.setItem(n,JSON.stringify(i))}catch{}await w.post("/api/onboarding/save",{step:x,data:u||{}})}async function z(){const x=["welcome","voice","basics","ops","connections","social","goals","styles","review"],u={};try{for(const n of x){const t=localStorage.getItem("bvxo:"+n);t&&(u[n]=JSON.parse(t))}}catch{}return u}async function T(x,u){try{const n=await w.get(`/oauth/${x}/login${u?.returnTo?`?return=${encodeURIComponent(u.returnTo)}`:""}`),t=String(n?.url||"");if(t){window.location.href=t;return}}catch{}try{const n=new URLSearchParams;u?.returnTo&&n.set("return",u.returnTo);const t=await fetch(`https://api.brandvx.io/api/oauth/${x}/start${n.toString()?`?${n.toString()}`:""}`,{credentials:"include",headers:{"X-User-Id":"dev","X-Role":"owner_admin"},redirect:"follow"});if(t.redirected&&t.url){window.location.href=t.url;return}try{const i=await t.json(),o=i&&i.url||"";if(o){window.location.href=o;return}}catch{}}catch{}}function F({next:x}){return e.jsxs("section",{className:"rounded-2xl shadow-xl bg-white/60 backdrop-blur border border-white/70 p-5",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-slate-900",children:"Welcome ðŸ‘‹"}),e.jsx("p",{className:"mt-2 text-slate-700 text-sm md:text-base",children:"Weâ€™ll connect a couple tools, set your tone, and preview messages â€” then youâ€™re live. Most pros finish in under 15 minutes."}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white hover:shadow-sm",onClick:()=>x(),children:"Letâ€™s set this up"})})]})}function Y({state:x,next:u,back:n,save:t}){const i=x.data.voice||{calmBold:.5,friendlyLuxe:.5,playfulPro:.5,purpose:""},[o,c]=l.useState(i.calmBold),[y,p]=l.useState(i.friendlyLuxe),[f,b]=l.useState(i.playfulPro),[a,g]=l.useState(i.purpose),r=async()=>{await t({voice:{calmBold:o,friendlyLuxe:y,playfulPro:f,purpose:a}}),u()};return e.jsxs("section",{className:"rounded-2xl shadow-xl bg-white/60 backdrop-blur border border-white/70 p-5",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Set your vibe"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"These sliders guide your brand voice across confirmations, follow-ups, and posts."}),e.jsxs("div",{className:"mt-4 grid gap-4",children:[e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm",children:"Calm â†” Bold"}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:o,onChange:s=>c(parseFloat(s.target.value)),className:"w-full"})]}),e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm",children:"Friendly â†” Luxe"}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:y,onChange:s=>p(parseFloat(s.target.value)),className:"w-full"})]}),e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm",children:"Playful â†” Professional"}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:f,onChange:s=>b(parseFloat(s.target.value)),className:"w-full"})]}),e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm",children:"If your brand could talkâ€¦ (one line)"}),e.jsx("input",{className:"w-full border rounded-md px-3 py-2",value:a,onChange:s=>g(s.target.value),placeholder:"Warm, human, and precise â€” here to make booking easy."})]})]}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",onClick:n,children:"Back"}),e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",onClick:r,children:"Continue"})]})]})}function U({state:x,next:u,back:n,save:t}){const i=x.data.basics||{name:"",business:"",city:"",inspiration:""},[o,c]=l.useState(i.name),[y,p]=l.useState(i.business),[f,b]=l.useState(i.city),[a,g]=l.useState(i.inspiration),r=async()=>{await t({basics:{name:o,business:y,city:f,inspiration:a}}),u()};return e.jsxs("section",{className:"rounded-2xl shadow-xl bg-white/60 backdrop-blur border border-white/70 p-5",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"You, briefly"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"This helps drafts feel like you."}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3",children:[e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm",children:"Full name"}),e.jsx("input",{className:"w-full border rounded-md px-3 py-2",value:o,onChange:s=>c(s.target.value)})]}),e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm",children:"Business name"}),e.jsx("input",{className:"w-full border rounded-md px-3 py-2",value:y,onChange:s=>p(s.target.value)})]}),e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm",children:"City / area"}),e.jsx("input",{className:"w-full border rounded-md px-3 py-2",value:f,onChange:s=>b(s.target.value)})]}),e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm",children:"What inspired you to start your brand?"}),e.jsx("input",{className:"w-full border rounded-md px-3 py-2",value:a,onChange:s=>g(s.target.value),placeholder:"One line is perfect."})]})]}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",onClick:n,children:"Back"}),e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",onClick:r,children:"Continue"})]})]})}function G({state:x,next:u,back:n,save:t}){const i=x.data.ops||{clientsPerWeek:10,avgMinutes:90,avgPrice:120,hrsAdmin:4,hrsContent:3},[o,c]=l.useState(i.clientsPerWeek),[y,p]=l.useState(i.avgMinutes),[f,b]=l.useState(i.avgPrice),[a,g]=l.useState(i.hrsAdmin),[r,s]=l.useState(i.hrsContent),d=Math.max(0,Math.round((a*.5+r*.4)*10)/10),v=async()=>{await t({ops:{clientsPerWeek:o,avgMinutes:y,avgPrice:f,hrsAdmin:a,hrsContent:r}}),u()};return e.jsxs("section",{className:"rounded-2xl shadow-xl bg-white/60 backdrop-blur border border-white/70 p-5",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"How busy are your weeks?"}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3",children:[e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm",children:"Clients per week"}),e.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",value:o,onChange:h=>c(parseInt(h.target.value||"0"))})]}),e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm",children:"Average minutes per service"}),e.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",value:y,onChange:h=>p(parseInt(h.target.value||"0"))})]}),e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm",children:"Average price per service ($)"}),e.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",value:f,onChange:h=>b(parseInt(h.target.value||"0"))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm",children:"Hours/week on admin"}),e.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",value:a,onChange:h=>g(parseFloat(h.target.value||"0"))})]}),e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm",children:"Hours/week on content"}),e.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",value:r,onChange:h=>s(parseFloat(h.target.value||"0"))})]})]})]}),e.jsxs("div",{className:"mt-3 text-sm text-slate-700",children:["Estimated time saved: ",e.jsxs("strong",{children:["â‰ˆ",d," hrs/week"]})]}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",onClick:n,children:"Back"}),e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",onClick:v,children:"Continue"})]})]})}function H({back:x}){const u=E(),[n,t]=l.useState(!1),[i,o]=l.useState(""),[c,y]=l.useState(""),[p,f]=l.useState({});l.useEffect(()=>{(async()=>{try{const g=await N(),s=(await w.get(`/integrations/status?tenant_id=${encodeURIComponent(g)}`))?.providers||{},d={};Object.entries(s).forEach(([v,h])=>d[v]=!!h?.linked),f(d)}catch{}})()},[]);const b=async g=>{try{t(!0),y(""),o(""),await T(g,{returnTo:"workspace"}),o("Opening connect flowâ€¦")}catch(r){y(String(r?.message||r))}finally{t(!1)}},a=async()=>{try{localStorage.setItem("bvx_onboarding_done","1")}catch{}try{window.posthog?.capture?.("onboarding_complete")}catch{}u("/workspace?pane=dashboard")};return e.jsxs("section",{className:"rounded-2xl shadow-xl bg-white border border-white/80 p-5",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Letâ€™s look up your book"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"Connecting your calendar unlocks confirmations, reschedules, and notify-list magic."}),e.jsx("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3",children:["square","acuity"].map(g=>e.jsxs("button",{disabled:n,onClick:()=>b(g),className:`rounded-xl border p-4 text-center border-white/70 bg-white/70 ${n?"opacity-60 cursor-not-allowed":""}`,children:[e.jsxs("div",{className:"text-sm font-medium",children:["Connect ",g.charAt(0).toUpperCase()+g.slice(1)]}),e.jsx("div",{className:`text-[11px] mt-1 ${p[g]?"text-emerald-700":"text-slate-500"}`,children:p[g]?"Linked":"Not linked"})]},g))}),e.jsx("div",{className:"mt-3 text-[11px] text-slate-600",children:"Weâ€™ll return you here after you sign in."}),(i||c)&&e.jsxs("div",{className:"mt-3 text-xs",children:[i&&e.jsx("div",{className:"text-emerald-700 bg-emerald-50 border border-emerald-100 rounded-md px-2 py-1 inline-block",children:i}),c&&e.jsx("div",{className:"text-rose-700 bg-rose-50 border border-rose-100 rounded-md px-2 py-1 inline-block ml-2",children:c})]}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",disabled:n,onClick:x,children:"Back"}),e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",disabled:n,onClick:a,children:"Skip for now"}),e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",disabled:n,onClick:a,children:"Continue to dashboard"})]})]})}function D({state:x,back:u}){const n=x.data.social||{instagram:"",email:""},[t,i]=l.useState(n.instagram),[o,c]=l.useState(n.email),[y,p]=l.useState(!1),[f,b]=l.useState(!1),[a,g]=l.useState(""),r=async()=>{try{g(""),p(!0),(await w.post("/ai/tools/execute",{name:"brand.vision.analyze",params:{tenant_id:await N(),sample:12}}))?.status==="ok"&&b(!0)}catch(s){g(String(s?.message||s))}finally{p(!1)}};return e.jsxs("section",{className:"rounded-2xl shadow-xl bg-white border border-white/80 p-5",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Instagram & Email"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"These enable content helper and respectful communication."}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"rounded-xl bg-white/70 p-3 border border-white/70",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-800",children:"Connect Instagram"}),e.jsx("div",{className:"text-xs text-slate-600",children:"Weâ€™ll tune your 14â€‘day plan to your recent posts. You approve first."})]}),e.jsx("button",{"aria-label":"Connect Instagram",className:"rounded-full border px-3 py-1.5 text-sm bg-white focus-visible:ring-2 focus-visible:ring-[var(--ring)]",onClick:()=>T("instagram",{returnTo:"onboarding"}),children:"Connect"})]}),y?e.jsxs("div",{className:"mt-3 animate-pulse",children:[e.jsx("div",{className:"h-3 w-40 bg-slate-200 rounded"}),e.jsx("div",{className:"mt-2 h-20 bg-slate-100 rounded"})]}):f?e.jsx("div",{className:"mt-2 text-xs text-slate-600",children:"Brand page scanned. Ready to generate your 14â€‘day plan."}):null,e.jsxs("div",{className:"mt-2 flex gap-2 text-xs",children:[e.jsx("button",{className:"rounded-full border px-3 py-1 bg-white",onClick:r,disabled:y,children:"Analyze now"}),a&&e.jsx("span",{className:"text-rose-700",children:a})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm",children:"Instagram handle"}),e.jsx("input",{className:"w-full border rounded-md px-3 py-2",value:t,onChange:s=>i(s.target.value),placeholder:"@yourhandle"})]}),e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm",children:"Email"}),e.jsx("input",{className:"w-full border rounded-md px-3 py-2",value:o,onChange:s=>c(s.target.value),placeholder:"you@business.com"})]})]}),e.jsx("div",{className:"mt-2 text-[11px] text-slate-600",children:"No Instagram? Add your handle; weâ€™ll still draft with your brand voice. Draft confidence shows when IG isnâ€™t connected."}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",onClick:u,children:"Back"}),e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",onClick:u,children:"Back to connections"})]})]})}const A=["Fewer no-shows","Fill cancellations fast","Revive dormant clients","Post consistently","Sell more retail","Grow referrals"];function Q({state:x,next:u,back:n,save:t}){const i=x.data.goals||{quarter:[],year:[]},[o,c]=l.useState(i.quarter),[y,p]=l.useState(i.year),f=(a,g,r)=>g(a.includes(r)?a.filter(s=>s!==r):[...a,r]),b=async()=>{await t({goals:{quarter:o,year:y}}),u()};return e.jsxs("section",{className:"rounded-2xl shadow-xl bg-white/60 backdrop-blur border border-white/70 p-5",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Goals"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"Pick a few goals for the next 3 months; add yearly if you like. Weâ€™ll track these as milestones."}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-sm font-medium",children:"3-month goals"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:A.map(a=>e.jsx("button",{onClick:()=>f(o,c,a),className:`px-3 py-1.5 rounded-full border ${o.includes(a)?"bg-sky-500 text-white border-sky-500":"bg-white text-slate-700 border-white/70"}`,children:a},a))})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-medium",children:"12-month goals (optional)"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:A.map(a=>e.jsx("button",{onClick:()=>f(y,p,a),className:`px-3 py-1.5 rounded-full border ${y.includes(a)?"bg-sky-500 text-white border-sky-500":"bg-white text-slate-700 border-white/70"}`,children:a},a))})]}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",onClick:n,children:"Back"}),e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",onClick:b,children:"Continue"})]})]})}const J=[{key:"no_show_shield",name:"No-Show Shield",desc:"Confirmations + friendly reschedule helper."},{key:"dormant_revive",name:"Dormant Revive",desc:"Reawaken 60+ day clients with one gentle nudge."},{key:"soonest_fill",name:"Soonest Slot Fill",desc:"Notify-list to fill cancellations first."},{key:"content_helper",name:"Content Helper (14-day)",desc:"Auto-drafted posts in your voice."},{key:"retail_push",name:"Retail Push",desc:"Suggest retail at the right moments."}];function V({state:x,next:u,back:n,save:t}){const i=x.data.styles||{selected:[]},[o,c]=l.useState(i.selected),y=m=>c(C=>C.includes(m)?C.filter(R=>R!==m):C.length>=3?C:[...C,m]),p=!!x?.data?.social?.oauth?.instagram?.linked,[f,b]=l.useState(""),[a,g]=l.useState(""),[r,s]=l.useState(""),[d,v]=l.useState(!1),[h,j]=l.useState(""),[k,_]=l.useState(""),$=async()=>{await t({styles:{selected:o}}),u()};return e.jsxs("section",{className:"rounded-2xl shadow-xl bg-white/60 backdrop-blur border border-white/70 p-5",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Pick your first 3 WorkStyles"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"These are your signature automations. Start with threeâ€”add more anytime."}),!p&&e.jsxs("div",{className:"mt-3 rounded-xl bg-amber-50 border border-amber-200 p-3 text-amber-900 text-sm",children:[e.jsx("div",{className:"font-medium",children:"Instagram not connected"}),e.jsx("div",{className:"text-xs",children:"Connect on the Social step to tune your 14â€‘day plan to recent posts."})]}),e.jsx("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3",children:J.map(m=>e.jsxs("button",{onClick:()=>y(m.key),className:`p-3 rounded-xl text-left border ${o.includes(m.key)?"border-sky-400 ring-1 ring-sky-400 bg-white":"border-white/70 bg-white/70"}`,children:[e.jsx("div",{className:"font-medium text-slate-900",children:m.name}),e.jsx("div",{className:"text-sm text-slate-600",children:m.desc})]},m.key))}),e.jsxs("div",{className:"mt-4 rounded-xl bg-white/70 border border-white/70 p-3",children:[e.jsx("div",{className:"font-medium text-slate-900",children:"14â€‘day plan"}),e.jsx("div",{className:"text-xs text-slate-600",children:"Weâ€™ll generate posts in your voice. You approve first."}),e.jsx("div",{className:"mt-2 grid gap-2",children:[1,2,3].map(m=>e.jsxs("div",{className:"rounded-lg border bg-white p-2 text-sm text-slate-800",children:["Sample post ",m,": â€œWarm, human copy in your brand vibe.â€"]},m))}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2 text-xs",children:["Shorter","More luxe","More playful","Add retail"].map(m=>e.jsx("button",{className:"px-2 py-1 rounded-full border bg-white",children:m},m))}),e.jsx("div",{className:"mt-3",children:e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",onClick:async()=>{try{v(!0),j(""),_("");const m=await w.post("/ai/tools/execute",{name:"social.schedule.14days",params:{tenant_id:await N()},require_approval:!0});j(m?.status==="ok"||m?.status==="pending"?"Plan requested â€” check Approvals":m?.status||"error"),await t({plan:{requested:!0,ts:Date.now()}})}catch(m){_(String(m?.message||m))}finally{v(!1)}},children:"Generate 14â€‘day plan"})}),(h||k)&&e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsx("span",{className:"text-emerald-700",children:h})," ",k&&e.jsx("span",{className:"text-rose-700 ml-2",children:k})]}),e.jsxs("div",{className:"mt-3 rounded-lg border bg-white p-2",children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Milestone ready"}),e.jsx("div",{className:"text-xs text-slate-600",children:"When you publish your first plan, share it with your audience."}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-xs",children:[e.jsx("button",{className:"px-2 py-1 rounded-md border bg-white",onClick:()=>{try{navigator.clipboard.writeText("Published our first 14â€‘day plan â€” warm, human posts only.")}catch{}},children:"Copy caption"}),e.jsx("button",{className:"px-2 py-1 rounded-md border bg-white",onClick:()=>{try{navigator.clipboard.writeText(window.location.origin+"/s/demo")}catch{}},children:"Copy share link"})]})]})]}),e.jsxs("div",{className:"mt-4 rounded-xl bg-white/70 border border-white/70 p-3",children:[e.jsx("div",{className:"font-medium text-slate-900",children:"Train VX â€” three quick inputs"}),e.jsx("div",{className:"text-xs text-slate-600",children:"These guide tone and priorities in drafts."}),e.jsxs("label",{className:"block mt-2 text-sm",children:["Audience focus",e.jsx("input",{className:"w-full border rounded-md px-3 py-2 mt-1",placeholder:"Ex: Balayage + livedâ€‘in color",value:f,onChange:m=>b(m.target.value)})]}),e.jsxs("label",{className:"block mt-2 text-sm",children:["Signature services",e.jsx("input",{className:"w-full border rounded-md px-3 py-2 mt-1",placeholder:"Ex: Copper melt, gloss, bond repair",value:a,onChange:m=>g(m.target.value)})]}),e.jsxs("label",{className:"block mt-2 text-sm",children:["Tone preferences",e.jsx("input",{className:"w-full border rounded-md px-3 py-2 mt-1",placeholder:"Ex: Warm, kind, no hard sell",value:r,onChange:m=>s(m.target.value)})]}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",disabled:d,onClick:async()=>{try{v(!0),j(""),_(""),await t({trainvx:{audience:f,services:a,tone:r}}),j("Saved")}catch(m){_(String(m?.message||m))}finally{v(!1)}},children:"Save"})}),(h||k)&&e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsx("span",{className:"text-emerald-700",children:h})," ",k&&e.jsx("span",{className:"text-rose-700 ml-2",children:k})]})]}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",onClick:n,children:"Back"}),e.jsx("button",{disabled:o.length===0,className:"rounded-full border px-3 py-2 text-sm bg-white disabled:opacity-50",onClick:$,children:"Continue"})]})]})}function X({state:x,back:u,onFinish:n}){const t=x.data,i=(t.ops?.hrsAdmin||0)*.5+(t.ops?.hrsContent||0)*.4,[o,c]=l.useState(!1),[y,p]=l.useState(""),[f,b]=l.useState(""),a=async s=>{try{c(!0),b(""),p("");const d=await w.get("/billing/config"),v=s==="sub_147_trial"?d?.price_147||"":d?.price_97||"",h={mode:s==="one_time_97"?"payment":"subscription"};v&&(h.price_id=v),s==="sub_147_trial"&&(h.trial_days=d?.trial_days||7);const j=await w.post("/billing/create-checkout-session",h);j?.url&&(window.location.href=j.url)}catch(d){b(String(d?.message||d))}finally{c(!1)}},g=async s=>{try{c(!0),b(""),p("");const d=await r(s);(await w.post("/share/screenshot",{tenant_id:await N(),data_url:d,title:"onboarding_share"}))?.token&&p("Thanks! Referral applied if subscribed.");try{await w.post("/billing/referral",{tenant_id:await N(),delta:1})}catch{}}catch(d){b(String(d?.message||d))}finally{c(!1)}},r=s=>new Promise((d,v)=>{const h=new FileReader;h.onload=()=>d(String(h.result||"")),h.onerror=v,h.readAsDataURL(s)});return e.jsxs("section",{className:"rounded-2xl shadow-xl bg-white/60 backdrop-blur border border-white/70 p-5",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Youâ€™re live ðŸŽ‰"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"Hereâ€™s a quick summary. You can adjust anything later in Settings / Connections."}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-xl border bg-white/70",children:[e.jsx("div",{className:"font-medium",children:"Brand voice"}),e.jsx("div",{className:"text-sm text-slate-600",children:t.voice?.purpose||"â€”"})]}),e.jsxs("div",{className:"p-3 rounded-xl border bg-white/70",children:[e.jsx("div",{className:"font-medium",children:"Operations"}),e.jsxs("div",{className:"text-sm text-slate-600",children:[t.ops?.clientsPerWeek||"â€”"," clients/week â€¢ ",t.ops?.avgMinutes||"â€”"," min/service â€¢ $",t.ops?.avgPrice||"â€”"]})]}),e.jsxs("div",{className:"p-3 rounded-xl border bg-white/70",children:[e.jsx("div",{className:"font-medium",children:"Connections"}),e.jsx("div",{className:"text-sm text-slate-600",children:t.connections?.bookingProvider||"Not set"})]}),e.jsxs("div",{className:"p-3 rounded-xl border bg-white/70",children:[e.jsx("div",{className:"font-medium",children:"Goals"}),e.jsx("div",{className:"text-sm text-slate-600",children:(t.goals?.quarter||[]).join(", ")||"â€”"})]}),e.jsxs("div",{className:"p-3 rounded-xl border bg-white/70",children:[e.jsx("div",{className:"font-medium",children:"WorkStyles"}),e.jsx("div",{className:"text-sm text-slate-600",children:(t.styles?.selected||[]).join(", ")||"â€”"})]})]}),e.jsxs("div",{className:"mt-4 text-sm",children:["Estimated time saved: ",e.jsxs("strong",{children:["â‰ˆ",Math.round(i*10)/10," hrs/week"]})]}),e.jsxs("div",{className:"mt-3 rounded-xl border bg-white p-3",children:[e.jsx("div",{className:"font-medium text-slate-900 text-sm",children:"Milestone: Onboarding complete"}),e.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Share your first win â€” you just saved setup time and connected your tools."}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-xs",children:[e.jsx("button",{className:"px-2 py-1 rounded-md border bg-white",onClick:()=>{try{navigator.clipboard.writeText("Just finished BrandVX onboarding â€” short, kind messages in our voice.")}catch{}},children:"Copy caption"}),e.jsx("button",{className:"px-2 py-1 rounded-md border bg-white",onClick:()=>{try{navigator.clipboard.writeText(window.location.origin+"/s/demo")}catch{}},children:"Copy share link"})]})]}),e.jsxs("div",{className:"mt-5 rounded-xl border bg-white p-3",children:[e.jsx("div",{className:"font-medium text-slate-900 text-sm",children:"Choose billing"}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-xs",children:[e.jsxs(S,{variant:"outline",size:"sm",disabled:o,onClick:()=>a("sub_147_trial"),children:["$147/mo + ",7,"â€‘day free trial"]}),e.jsx(S,{variant:"outline",size:"sm",disabled:o,onClick:()=>a("one_time_97"),children:"$97 today (oneâ€‘time)"})]}),e.jsx("div",{className:"mt-2 text-[11px] text-slate-600",children:"If you share now, your subscription can drop to $127/mo immediately."})]}),e.jsxs("div",{className:"mt-3 rounded-xl border bg-white p-3",children:[e.jsx("div",{className:"font-medium text-slate-900 text-sm",children:"Quick insights"}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-xs",children:[e.jsx(S,{variant:"outline",size:"sm",disabled:o,onClick:async()=>{try{c(!0),p(""),b(""),await w.post("/ai/tools/execute",{name:"db.query.named",params:{tenant_id:await N(),name:"metric.weekly_revenue_last_week",params:{}}}),p("Computed last week revenue")}catch(s){b(String(s?.message||s))}finally{c(!1)}},children:"Weekly revenue"}),e.jsx(S,{variant:"outline",size:"sm",disabled:o,onClick:async()=>{try{c(!0),p(""),b(""),await w.post("/ai/tools/execute",{name:"contacts.list.top_ltv",params:{tenant_id:await N(),limit:5}}),p("Fetched top clients by LTV")}catch(s){b(String(s?.message||s))}finally{c(!1)}},children:"Top clients"}),e.jsx(S,{variant:"outline",size:"sm",disabled:o,onClick:async()=>{try{c(!0),p(""),b(""),await w.post("/ai/tools/execute",{name:"contacts.import.square",params:{tenant_id:await N()}}),p("Import from Square started")}catch(s){b(String(s?.message||s))}finally{c(!1)}},children:"Import clients"})]})]}),e.jsxs("div",{className:"mt-3 rounded-xl border bg-white p-3",children:[e.jsx("div",{className:"font-medium text-slate-900 text-sm",children:"Share to unlock $127/mo"}),e.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Post anywhere. Upload a screenshot here; we wonâ€™t overâ€‘verify."}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:s=>{const d=s.target.files?.[0];d&&g(d)}}),y&&e.jsx("span",{className:"text-emerald-700",children:y}),f&&e.jsx("span",{className:"text-rose-700",children:f})]})]}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",onClick:u,children:"Back"}),e.jsx("button",{className:"rounded-full border px-3 py-2 text-sm bg-white",onClick:n,children:"Take me to my workspace"})]})]})}const I=["welcome","voice","basics","ops","connections"];function ce(){const x=E(),u=W(),[n,t]=l.useState({step:"welcome",data:{}}),{showToast:i}=M(),o="https://app.squareup.com/appointments/book/wa9po5tz5jxg3y/L3R340JYRARQK/start";l.useEffect(()=>{(async()=>{try{const r=await z();r&&Object.keys(r).length&&t(s=>({...s,data:{...r}}))}catch{}})();try{const r=new URLSearchParams(u.search),s=r.get("connected"),d=r.get("error"),v=r.get("provider")||s||"";if(d&&v){try{B("oauth_error",{provider:v,error:d})}catch{}try{i({title:`${v} connection failed`,description:String(d)})}catch{}}else if(s)if(v==="instagram"){const h={social:{oauth:{instagram:{provider:v,linked:!0}}}};P("social",h),t(j=>({...j,data:{...j.data,...h}}));try{i({title:"Connected",description:"Instagram linked. You can manage this later in Integrations."})}catch{}try{B("oauth_linked",{provider:v})}catch{}}else{P("connections",{connections:{bookingProvider:v,oauth:{provider:v,linked:!0}}});try{B("oauth_linked",{provider:v})}catch{}try{i({title:"Connected",description:`${v} linked. Redirecting to your Dashboardâ€¦`})}catch{}setTimeout(()=>{try{const j=new URL(window.location.href);j.pathname="/workspace",j.searchParams.set("pane","dashboard"),j.searchParams.delete("provider"),j.searchParams.delete("connected"),j.searchParams.delete("error"),window.history.replaceState({},"",j.toString());try{sessionStorage.setItem("bvx_showcase_resuming","1")}catch{}window.dispatchEvent(new CustomEvent("bvx:showcase:resume"))}catch{}x("/workspace?pane=dashboard")},200)}}catch{}},[u.search]);const c=l.useMemo(()=>I.indexOf(n.step),[n.step]),y=async r=>{const s={...n.data,...r||{}};try{await P(n.step,r||{})}catch{}if(n.step==="connections"){t({step:"connections",data:s}),b();return}const d=I[Math.min(c+1,I.length-1)];t({step:d,data:s})},p=()=>{const r=I[Math.max(c-1,0)];t(s=>({...s,step:r}))},f=async r=>{const s={...n.data,...r||{}};try{await P(n.step,r||{})}catch{}t(d=>({...d,data:s}))},b=()=>{try{localStorage.setItem("bvx_onboarding_done","1")}catch{}try{localStorage.removeItem("bvx_guide_done")}catch{}try{sessionStorage.removeItem("bvx_resume")}catch{}try{o&&localStorage.setItem("bvx_booking_nudge","1")}catch{}try{window.posthog?.capture?.("onboarding_complete")}catch{}x("/workspace?pane=dashboard")},a={state:n,next:y,back:p,save:f,startOAuth:T},g=(()=>{switch(n.step){case"welcome":return e.jsx(F,{...a});case"voice":return e.jsx(Y,{...a});case"basics":return e.jsx(U,{...a});case"ops":return e.jsx(G,{...a});case"connections":return e.jsx(H,{...a});case"social":return e.jsx(D,{...a});case"goals":return e.jsx(Q,{...a});case"styles":return e.jsx(V,{...a});case"review":return e.jsx(X,{...a,onFinish:b})}})();return e.jsxs("div",{className:"relative min-h-[100dvh] w-full overflow-hidden px-4 py-8",children:[e.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0",style:{background:"radial-gradient(900px 320px at 10% -10%, rgba(236,72,153,0.08), transparent), radial-gradient(700px 240px at 90% -20%, rgba(99,102,241,0.08), transparent)"}}),e.jsxs(L,{maxWidthClass:"max-w-[720px]",minHeightClass:"min-h-[560px]",children:[e.jsxs("header",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold tracking-tight text-slate-900 text-xl",style:{fontFamily:"Space Grotesk, Inter, system-ui"},children:"Onboarding â€” 5 quick steps"}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Beauty pros â€¢ Gentle setup â€¢ Your voice â€¢ Your clients"}),e.jsx("p",{className:"text-slate-600/90 text-[12px] mt-1",children:"You can finish anytime in Settings / Connections."})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(S,{"aria-label":"Skip onboarding for now",variant:"ghost",size:"sm",onClick:()=>x("/workspace?pane=dashboard"),className:"rounded-full focus-visible:ring-2 focus-visible:ring-[var(--ring)]",children:"Skip for now"})})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2","aria-label":"Progress",children:[Array.from({length:5}).map((r,s)=>e.jsx("div",{"aria-label":`step-${s+1}`,"aria-current":s===Math.min(c,4)?"step":void 0,className:`h-2 rounded-full transition-all ${s===Math.min(c,4)?"bg-pink-500 w-8":"bg-slate-200 w-3"}`},s)),e.jsxs("div",{className:"ml-auto text-xs text-slate-500",children:["Step ",Math.min(c+1,5),"/5"]})]})]}),e.jsx("main",{className:"relative z-10 mt-4 overflow-hidden",children:e.jsx(q,{mode:"wait",children:e.jsx(O.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.25},children:g},n.step)})})]})]})}export{ce as default};
