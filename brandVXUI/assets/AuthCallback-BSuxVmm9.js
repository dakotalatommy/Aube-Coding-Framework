import{u as p,r as f,j as n}from"./react-vendor--lxKGBiW.js";import{s as h}from"./index-Bk3Do8do.js";import"./radix-Dc_FVRD7.js";import"./sentry-ZUDTCraJ.js";import"./howler-DHXmObXC.js";import"./physics-DQSz9XbC.js";import"./analytics-BPch_qa6.js";import"./supabase-CZcX4Eou.js";const g={};function P(){const d=p();return f.useEffect(()=>{const l=async()=>{try{const e=new URL(window.location.href);let t=e.searchParams.get("access_token"),a=e.searchParams.get("refresh_token");try{if((!t||!a)&&e.hash){const o=new URLSearchParams(e.hash.replace(/^#/,""));t=t||o.get("access_token")||void 0,a=a||o.get("refresh_token")||void 0}}catch{}if(t&&a)try{await h.auth.setSession({access_token:t,refresh_token:a})}catch{}else try{await h.auth.exchangeCodeForSession(window.location.href)}catch{}}catch{}try{const e=new URL(window.location.href),t=["access_token","refresh_token","token_type","expires_in","provider_token","code","scope"];if(t.forEach(a=>e.searchParams.delete(a)),e.hash)try{const a=new URLSearchParams(e.hash.replace(/^#/,""));t.forEach(c=>a.delete(c));const o=a.toString();e.hash=o?"#"+o:""}catch{}window.history.replaceState({},"",e.toString())}catch{}};(async()=>{try{await Promise.race([l(),new Promise(r=>setTimeout(()=>r(),700))])}catch{}try{window.location.hash&&window.history.replaceState({},"",window.location.pathname+window.location.search)}catch{}const e=String(g?.VITE_ONBOARDING_DEV_MODE||"0")==="1",t=new URLSearchParams(window.location.search),o=t.get("force")==="1"||t.get("forceOnboard")==="1"||t.get("welcome")==="1";let c=!1;try{c=localStorage.getItem("bvx_onboarding_done")==="1"}catch{}const s=t.get("next"),w=s&&s.startsWith("/")?decodeURIComponent(s):"",i=e?"/onboarding":w||(!c||o?"/onboarding":"/workspace?pane=dashboard");try{const r=new URL(window.location.href);["provider","connected","error","postVerify","tour"].forEach(m=>r.searchParams.delete(m)),window.history.replaceState({},"",r.toString())}catch{}try{new window.BroadcastChannel("bvx_auth").postMessage({type:"auth_ready"})}catch{}try{localStorage.setItem("bvx_auth_ready","1")}catch{}try{localStorage.removeItem("bvx_intro_pending")}catch{}try{localStorage.removeItem("bvx_auth_in_progress")}catch{}try{window.opener?.postMessage("bvx_auth_ready",window.location.origin)}catch{}window.location.replace(i);try{setTimeout(()=>{try{window.location.pathname.includes("/auth")&&window.location.replace(i)}catch{}},800)}catch{}try{setTimeout(()=>{try{window.location.pathname.includes("/auth")&&window.location.assign(i)}catch{}},2e3)}catch{}})()},[d.search]),n.jsx("div",{className:"max-w-md mx-auto py-10",children:n.jsxs("div",{className:"border rounded-2xl p-6 shadow-sm",style:{background:"linear-gradient(180deg, #fff, #fff8fb)"},children:[n.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Finishing sign‑in…"}),n.jsx("p",{className:"text-slate-600 mt-2",children:"You can close any extra tabs. We’ll take you to your workspace automatically."})]})})}export{P as default};
