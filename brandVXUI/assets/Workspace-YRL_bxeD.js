const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-BoI9Fb6L.js","assets/react-vendor--lxKGBiW.js","assets/radix-Dc_FVRD7.js","assets/sentry-ZUDTCraJ.js","assets/howler-DHXmObXC.js","assets/index-Bk3Do8do.js","assets/physics-DQSz9XbC.js","assets/analytics-BPch_qa6.js","assets/supabase-CZcX4Eou.js","assets/index-B3fb9uhs.css","assets/Button-DlSz7573.js","assets/guide-D27LQTJO.js","assets/driver-D6Mpyj2M.js","assets/driver-DB0Q8XAf.css","assets/Skeleton-Bpnt4vlv.js","assets/StatusBadge-k1-2v4io.js","assets/motion-37lkt-10.js","assets/Messages-BJ6oeZgW.js","assets/Table-CBXGn4MI.js","assets/Pager-CZom1-cd.js","assets/strings-ZJ386RGO.js","assets/Contacts-DOl3Xq_d.js","assets/EmptyState-BVAWAqiR.js","assets/Calendar-COuo-CO2.js","assets/Cadences-D3wfPyhB.js","assets/Inventory-KrBEQBXB.js","assets/Integrations-BWv2mJXR.js","assets/Approvals-CBkSWHo7.js","assets/Ask-BYKfh9fy.js","assets/Vision-DYCd2mr8.js"])))=>i.map(i=>d[i]);
import{r as a,s as De,j as e,u as He,e as Ye,L as Ke,_ as Y,H as Je,M as Xe,t as Qe,A as Ze,v as et,U as tt,w as nt,x as at,z as st,F as rt,G as ot}from"./react-vendor--lxKGBiW.js";import{B as Re}from"./Button-DlSz7573.js";import{g as O,a as l,s as Z,A as it,b as oe}from"./index-Bk3Do8do.js";import{w as ne,s as L}from"./guide-D27LQTJO.js";import{U as ct}from"./strings-ZJ386RGO.js";import"./radix-Dc_FVRD7.js";import"./sentry-ZUDTCraJ.js";import"./howler-DHXmObXC.js";import"./physics-DQSz9XbC.js";import"./analytics-BPch_qa6.js";import"./supabase-CZcX4Eou.js";import"./driver-D6Mpyj2M.js";let Be={};function ze(s){Be={...Be,...s}}function lt(s){return Be[s]}function dt(s){const g=async d=>{try{const i=typeof s=="function"?d.origin===s():!0,v=d?.data||{};if(!v||v.type!=="bvx:action")return;const{action:u,args:_,requestId:$}=v,W=lt(String(u));if(!W){d.source?.postMessage?.({type:"bvx:action:result",requestId:$,error:"unknown_action"},d.origin);return}const K=await Promise.resolve(W.run(...Array.isArray(_)?_:[]));d.source?.postMessage?.({type:"bvx:action:result",requestId:$,result:K},d.origin)}catch(i){try{d.source?.postMessage?.({type:"bvx:action:result",requestId:d?.data?.requestId,error:String(i?.message||i)},d.origin)}catch{}}};return window.addEventListener("message",g),()=>window.removeEventListener("message",g)}try{ze({"workflows.run.wow10":{id:"workflows.run.wow10",run:async()=>{try{const s=localStorage.getItem("bvx_tenant")||"",g=[{name:"wow.quickstart.10min",params:{tenant_id:s}},{name:"starter.wow.10min",params:{tenant_id:s}}];for(const d of g)try{const i=await l.post("/ai/tools/execute",{tenant_id:s,...d,require_approval:!0});if(!i?.error)return i}catch{}}catch{}return{status:"not_available"}}},"workflows.run.reminders":{id:"workflows.run.reminders",run:async()=>{try{const s=await O();return await l.post("/ai/tools/execute",{tenant_id:s,name:"appointments.schedule_reminders",params:{tenant_id:s},require_approval:!1})}catch{return{status:"error"}}},description:"Schedule gentle appointment reminders for this week"},"workflows.run.reengage_30":{id:"workflows.run.reengage_30",run:async()=>{try{const s=await O();return await l.post("/ai/tools/execute",{tenant_id:s,name:"campaigns.dormant.preview",params:{tenant_id:s,threshold_days:30},require_approval:!1})}catch{return{status:"error"}}},description:"Preview 30‑day re‑engagement list"},"workflows.run.winback_45":{id:"workflows.run.winback_45",run:async()=>{try{const s=await O();return await l.post("/ai/tools/execute",{tenant_id:s,name:"campaigns.dormant.preview",params:{tenant_id:s,threshold_days:45},require_approval:!1})}catch{return{status:"error"}}},description:"Preview 45+ day win‑back list"},"workflows.run.social_plan":{id:"workflows.run.social_plan",run:async()=>{try{const s=await O();return await l.post("/ai/tools/execute",{tenant_id:s,name:"social.schedule.14days",params:{tenant_id:s},require_approval:!0})}catch{return{status:"error"}}},description:"Draft a 14‑day social plan"},"workflows.run.import_and_normalize":{id:"workflows.run.import_and_normalize",run:async()=>{try{const s=await O();try{await l.post("/ai/tools/execute",{tenant_id:s,name:"contacts.import.square",params:{tenant_id:s},require_approval:!0})}catch{}try{await l.post("/ai/tools/execute",{tenant_id:s,name:"connectors.normalize",params:{tenant_id:s},require_approval:!1})}catch{}try{await l.post("/ai/tools/execute",{tenant_id:s,name:"connectors.cleanup",params:{tenant_id:s},require_approval:!1})}catch{}return{status:"ok"}}catch{return{status:"error"}}},description:"Pull bookings and tidy contact list"},"workflows.run.calendar_sync":{id:"workflows.run.calendar_sync",run:async()=>{try{const s=await O();return await l.post("/ai/tools/execute",{tenant_id:s,name:"calendar.sync",params:{tenant_id:s},require_approval:!1})}catch{return{status:"error"}}},description:"Sync calendar now"},"workflows.run.calendar_merge":{id:"workflows.run.calendar_merge",run:async()=>{try{const s=await O();return await l.post("/ai/tools/execute",{tenant_id:s,name:"calendar.merge",params:{tenant_id:s},require_approval:!1})}catch{return{status:"error"}}},description:"Merge duplicate calendar events"},"workflows.run.dedupe_contacts":{id:"workflows.run.dedupe_contacts",run:async()=>{try{const s=await O();return await l.post("/ai/tools/execute",{tenant_id:s,name:"contacts.dedupe",params:{tenant_id:s},require_approval:!0})}catch{return{status:"error"}}},description:"Remove duplicate contacts"},"nav.billing":{id:"nav.billing",run:async()=>{try{window.location.assign("/billing")}catch{window.location.href="/billing"}return{status:"ok"}},description:"Open Billing"},"nav.integrations":{id:"nav.integrations",run:async()=>{try{window.location.assign("/workspace?pane=integrations")}catch{window.location.href="/workspace?pane=integrations"}return{status:"ok"}},description:"Open Settings/Connections"},"quick.import_bookings":{id:"quick.import_bookings",run:async()=>{try{const s=await O();return await l.post("/ai/tools/execute",{tenant_id:s,name:"contacts.import.square",params:{tenant_id:s},require_approval:!0})}catch{return{status:"error"}}},description:"Import booking data (Square)"},"nav.connect_google_calendar":{id:"nav.connect_google_calendar",run:async()=>{try{window.location.assign("/workspace?pane=integrations&provider=google")}catch{window.location.href="/workspace?pane=integrations&provider=google"}return{status:"ok"}},description:"Connect Google Calendar"},"nav.open_brandvzn_demo":{id:"nav.open_brandvzn_demo",run:async()=>{try{window.location.assign("/vision?demo=1")}catch{window.location.href="/vision?demo=1"}return{status:"ok"}},description:"Open brandVZN demo"},"nav.open_todo":{id:"nav.open_todo",run:async()=>{try{window.location.assign("/workspace?pane=approvals")}catch{window.location.href="/workspace?pane=approvals"}return{status:"ok"}},description:"Open To‑Do"},"nav.view_14day_plan":{id:"nav.view_14day_plan",run:async()=>{try{window.location.assign("/dashboard")}catch{window.location.href="/dashboard"}return{status:"ok"}},description:"View 14‑day Plan"}})}catch{}function ut(){const s=new Set;return{emit(g){s.forEach(d=>{try{d(g)}catch(i){console.error("onboarding event listener error",i)}})},subscribe(g){return s.add(g),()=>s.delete(g)}}}function pt(s){const g=s.storage??ne,d=ut();let i={phase:"idle",forced:!1,running:!1};const v=new Set;let u=null;const _=x=>{i={...i,...x},v.forEach(k=>{try{k(i)}catch(S){console.error("workspace onboarding listener error",S)}}),d.emit({type:"phase",phase:i.phase})},$=(x,k)=>{s.logger?.(x,k),d.emit({type:"log",message:x,data:k})},W=async x=>{_({running:!0,forced:x});try{_({phase:"welcome"}),await s.effects.showWelcome({forced:x}),_({phase:"tour"}),await s.effects.runTour({forced:x}),_({phase:"billing"}),await s.effects.ensureBilling({forced:x}),_({phase:"dashboard"}),await s.effects.runDashboardGuide({forced:x}),_({phase:"quickstart"}),await s.effects.runQuickstart({forced:x}),_({phase:"complete"}),await s.effects.complete({forced:x}),_({running:!1})}catch(k){const S=k instanceof Error?k:new Error(String(k));throw $("onboarding:error",{error:S.message}),_({phase:"error",running:!1,error:S}),s.effects.handleError?.({forced:x,error:S}),d.emit({type:"error",error:S}),S}};return{async start(x){const k=!!x?.force;if(u)return u;$("onboarding:start",{forced:k}),u=W(k).finally(()=>{u=null}),await u},async reset(x){$("onboarding:reset"),await g.forceReset({keepTenant:!0,resetServerFlags:x?.serverReset}),_({phase:"idle",forced:!1,running:!1,error:void 0}),d.emit({type:"reset"})},getState(){return{...i}},subscribe(x){return v.add(x),()=>v.delete(x)},bus:d}}function mt(s,g={}){const d=a.useRef(s);a.useEffect(()=>{d.current=s},[s]);const i=a.useMemo(()=>{const v={showWelcome:u=>d.current.showWelcome(u),runTour:u=>d.current.runTour(u),ensureBilling:u=>d.current.ensureBilling(u),runDashboardGuide:u=>d.current.runDashboardGuide(u),runQuickstart:u=>d.current.runQuickstart(u),complete:u=>d.current.complete(u),handleError:d.current.handleError?u=>d.current.handleError?.(u):void 0};return pt({storage:g.storage,logger:g.logger,effects:v})},[g.storage,g.logger]);return a.useEffect(()=>{if(!g.exposeDebugHelpers)return;const v={controller:i,state:()=>i.getState(),start:(u=!1)=>i.start({force:u}),reset:i.reset,bus:i.bus};return window.__onboarding=v,()=>{window.__onboarding?.controller===i&&delete window.__onboarding}},[i,g.exposeDebugHelpers]),i}function gt(){try{let s=document.getElementById("bvx-overlay-root");return s||(s=document.createElement("div"),s.id="bvx-overlay-root",Object.assign(s.style,{position:"fixed",inset:"0",zIndex:String(2147483647),isolation:"isolate",pointerEvents:"none",transform:"translateZ(0)",backfaceVisibility:"hidden",WebkitFontSmoothing:"antialiased"}),document.body.appendChild(s)),s}catch{return null}}function ht(s){if(!s||!s.parentElement)return()=>{};try{const g=s.parentElement,d=()=>{try{g.lastElementChild!==s&&g.appendChild(s)}catch{}},i=new MutationObserver(()=>d());return i.observe(g,{childList:!0}),d(),()=>{try{i.disconnect()}catch{}}}catch{return()=>{}}}function Ve({children:s}){const g=a.useMemo(()=>typeof window<"u"?gt():null,[]);return a.useEffect(()=>ht(g),[g]),g?De.createPortal(s,g):null}const bt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"https://api.brandvx.io",VITE_BETA_RECOMMEND_ONLY:"0",VITE_BOOKING_URL:"https://app.squareup.com/appointments/book/wa9po5tz5jxg3y/L3R340JYRARQK/start",VITE_DEV_AUTOCONNECT:"0",VITE_DISABLE_MOTION:"0",VITE_FEATURE_SOCIAL:"1",VITE_OAUTH_APPLE:"0",VITE_POSTHOG_HOST:"https://app.posthog.com",VITE_POSTHOG_KEY:"phx_Bk7zzgJWCaLyvNdooUEYWeTd8E6S4rHGQQB7eD9jUzc7uow",VITE_SHOW_REDIRECT_URIS:"0",VITE_STRIPE_PK:"pk_live_51RyvuWPc6PGNhmWgyrAJHjrLzHqQtFP68doiN4zXjIdwUmsT3GSAKpsXthWAUxQiDkMcxYdGZRokwFY52MFoSRIN002Gw00m3D",VITE_STRIPE_PRICE_147:"price_1S06UXPc6PGNhmWgwLwohes2",VITE_STRIPE_PRICE_97:"price_1S06W2Pc6PGNhmWgyEnKQwSH",VITE_STRIPE_TRIAL_DAYS:"7",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR3ZnZucWFqcndydXBycWJqeHBoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxMTAyNjAsImV4cCI6MjA3MDY4NjI2MH0.8dogGZIj3jK3NF3DwHrDpLCR_ri0sGcsbqJxllYgXOs",VITE_SUPABASE_URL:"https://dwfvnqajrwruprqbjxph.supabase.co"};function ft(s){try{const g=String(s||"").trim();if(!g)return"";let i=g.replace(/\r/g,"").split(/\n{2,}/).map(v=>v.trim()).filter(Boolean).map(v=>/^(\d+\)|•|-|\*)\s+/.test(v)?v:v.length>160?v.replace(/([\.!?])\s+/g,`$1
`):v).join(`

`);try{i=i.replace(/`([^`]+)`/g,"$1"),i=i.replace(/\{\{[^}]+\}\}/g,"this detail"),i=i.replace(/\[[^\]]+\]/g,v=>{const u=v.slice(1,-1);return/^\d{4}-\d{2}-\d{2}$/.test(u)?u:"this detail"}),i=i.replace(/<[^>]+>/g,"this detail"),i=i.replace(/\b(var|vars|variable|variables|param|params|parameter|parameters|arg|args)\b/gi,"detail"),i=i.replace(/\b(P|N)\b/g,"detail"),i=i.replace(/[ \t]+/g," ").replace(/\n{3,}/g,`

`).trim()}catch{}return i}catch{return s||""}}function xt({hideTrigger:s}){const g="https://app.squareup.com/appointments/book/wa9po5tz5jxg3y/L3R340JYRARQK/start",[d,i]=a.useState(()=>{try{return localStorage.getItem("bvx_support_open")==="1"}catch{return!1}}),[v]=a.useState(()=>{try{const c=sessionStorage.getItem("bvx_support_session")||"";if(c)return c;const f="sup_"+Math.random().toString(36).slice(2,10);return sessionStorage.setItem("bvx_support_session",f),f}catch{return"sup_"+Math.random().toString(36).slice(2,10)}}),[u,_]=a.useState([]),[$,W]=a.useState(""),[K,x]=a.useState(!1),[k,S]=a.useState(!1),me=a.useRef(null),[G,H]=a.useState(!1),[ve,J]=a.useState(!1),[N,ge]=a.useState(!1),[ye,B]=a.useState(null),[_e,ie]=a.useState(null),[D,he]=a.useState({name:"",email:"",phone:"",description:""}),[y,ae]=a.useState([]),se=a.useMemo(()=>{try{const c=bt||{},f=[c?.VITE_APP_VERSION,c?.VITE_COMMIT,c?.VITE_BUILD_ID,c?.VITE_GIT_SHA];for(const h of f)if(h)return String(h);if(typeof window<"u"){const h=[window.__APP_VERSION__,window.__COMMIT_SHA__,window.APP_VERSION];for(const w of h)if(w)return String(w)}}catch{}return"dev"},[]);a.useEffect(()=>{try{window.dispatchEvent(new CustomEvent("bvx:support:mounted")),console.info("[SupportBubble] mounted",{path:window.location.pathname});let c=document.getElementById("bvx-support-probe");return c||(c=document.createElement("div"),c.id="bvx-support-probe",c.setAttribute("data-bvx","support-bubble"),Object.assign(c.style,{position:"fixed",right:"4px",bottom:"4px",width:"1px",height:"1px",opacity:"0",zIndex:"4001",pointerEvents:"none"}),document.body.appendChild(c)),(()=>{try{return new URLSearchParams(window.location.search).get("supportDebug")==="1"?!0:localStorage.getItem("bvx_support_debug")==="1"}catch{return!1}})()&&(H(!0),window.setTimeout(()=>H(!1),2600)),window.setTimeout(()=>{try{const h=document.querySelector('[data-bvx="support-bubble-button"]');if(h){const w=window.getComputedStyle(h);console.info("[SupportBubble] button styles",{display:w.display,visibility:w.visibility,opacity:w.opacity,zIndex:w.zIndex})}else console.warn("[SupportBubble] button not found at mount")}catch{}},0),()=>{try{document.getElementById("bvx-support-probe")?.remove()}catch{}}}catch{}},[]),a.useEffect(()=>{try{localStorage.setItem("bvx_support_open",d?"1":"0")}catch{}},[d]),a.useEffect(()=>{const c=w=>{try{const m=w?.detail||{},E=typeof m?.prefill=="string"?m.prefill:"";E&&W(E)}catch{}i(!0)},f=()=>i(!1),h=()=>i(w=>!w);return window.addEventListener("bvx:support:open",c),window.addEventListener("bvx:support:close",f),window.addEventListener("bvx:support:toggle",h),()=>{window.removeEventListener("bvx:support:open",c),window.removeEventListener("bvx:support:close",f),window.removeEventListener("bvx:support:toggle",h)}},[]),a.useEffect(()=>{d&&u.length===0&&_([{role:"assistant",content:"hey — this is support from brandVX. what can i help you with?"}])},[d]),a.useEffect(()=>{try{me.current?.scrollTo({top:me.current.scrollHeight,behavior:"smooth"})}catch{}},[u.length]),a.useMemo(()=>!k,[k]);const Te=async()=>{try{const c=(await Z.auth.getSession()).data.session;return c?.access_token?(S(!1),c):(S(!0),null)}catch{return S(!0),null}},ee=async()=>{const c=$.trim();if(!c||K)return;W("");const f=[...u,{role:"user",content:c}];_(f),x(!0);try{if(!await Te()){_(z=>[...z,{role:"assistant",content:"please sign in to continue the chat. you can also email support@brandvx.io."}]);return}const w=await O(),m=await l.post("/ai/chat/raw",{tenant_id:w,session_id:v,mode:"support",messages:f},{timeoutMs:45e3}),E=String(m?.text||"").trim(),re=ft(E);_(z=>[...z,{role:"assistant",content:re||"thanks — how else can i help?"}])}catch(h){_(w=>[...w,{role:"assistant",content:String(h?.message||h)}])}finally{x(!1)}},ce=c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),ee())},le=c=>f=>{he(h=>({...h,[c]:f.target.value}))},Ce=c=>{const f=Array.from(c.target.files||[]);if(!f.length)return;B(null),ie(null);const h=[...y];for(const w of f){if(h.length>=3)break;const m=w.size<=10*1024*1024,E=/^(image\/(png|jpeg)|application\/pdf)$/i.test(w.type);h.push({file:w,error:m?E?void 0:"Only PNG, JPEG, or PDF allowed":"File exceeds 10MB limit"})}ae(h.slice(0,3)),c.target.value=""},F=a.useCallback(c=>{ae(f=>f.filter((h,w)=>w!==c))},[]),q=a.useCallback(()=>{he({name:"",email:"",phone:"",description:""}),ae([]),B(null),ie(null)},[]),X=a.useCallback(()=>{J(!0),B(null),ie(null)},[]),be=a.useCallback(()=>{N||(J(!1),q())},[N,q]),Se=a.useCallback(async()=>{if(N)return;const c=D.email.trim(),f=D.description.trim();if(!c||!f){B("Email and description are required.");return}const h=y.filter(m=>!m.error).slice(0,3);if(h.reduce((m,E)=>m+(E.file.size||0),0)>10*1024*1024){B("Attachments cannot exceed 10MB combined.");return}ge(!0),B(null);try{const m=new FormData,E=await O();E&&m.append("tenant_id",E),m.append("name",D.name.trim()),m.append("email",c),m.append("phone",D.phone.trim()),m.append("description",f),m.append("url",typeof window<"u"?window.location.href:""),m.append("pathname",typeof window<"u"?window.location.pathname:""),m.append("user_agent",typeof navigator<"u"?navigator.userAgent:""),m.append("app_version",se);try{const C=localStorage.getItem("bvx_last_tour_page")||"",Ee=localStorage.getItem("bvx_last_tour_step")||"";C&&m.append("tour_page",C),Ee&&m.append("tour_step",Ee)}catch{}m.append("context_source","support-bubble"),h.forEach(C=>{m.append("attachments",C.file,C.file.name)});const re=(await Z.auth.getSession()).data.session,z={};re?.access_token&&(z.Authorization=`Bearer ${re.access_token}`);const Q=await fetch(`${it}/support/send`,{method:"POST",body:m,headers:z});if(Q.status===401){S(!0),B("Please sign in to send bug reports.");return}if(Q.status===429){B("Too many bug reports recently. Please try again in a few minutes.");return}const te=await Q.json().catch(async()=>({status:"error",detail:await Q.text()}));if(!Q.ok||te?.status==="error"){const C=te?.detail||te?.message||`Request failed (${Q.status})`;throw new Error(C)}const xe=te?.ticket_id?String(te.ticket_id):"",Pe=xe?`Thanks! Ticket ${xe} is on the way.`:"Thanks! We received your report.";ie(Pe);try{oe("support.bug.submit",{ticket_id:xe||void 0})}catch{}he(C=>({...C,description:""})),ae([])}catch(m){const E=m instanceof Error?m.message:String(m);B(E||"Something went wrong sending your report.")}finally{ge(!1)}},[se,y,D,N,oe,S,O,Z]);a.useEffect(()=>{const c=()=>i(!0),f=()=>{i(!0),X()},h=()=>i(!1);return window.addEventListener("bvx:support:open",c),window.addEventListener("bvx:support:open-bug",f),window.addEventListener("bvx:support:close",h),()=>{window.removeEventListener("bvx:support:open",c),window.removeEventListener("bvx:support:open-bug",f),window.removeEventListener("bvx:support:close",h)}},[X]),a.useEffect(()=>{const c={open:()=>i(!0),close:()=>i(!1),reportBug:()=>{i(!0),X()}};try{window.brandvxSupport=c}catch{}return()=>{try{window.brandvxSupport===c&&delete window.brandvxSupport}catch{}}},[X]);const fe=()=>{if(!ve)return null;const f=y.reduce((m,E)=>m+(E.file?.size||0),0)>10*1024*1024,h=y.some(m=>m.error),w=N||f||h||!D.description.trim()||!D.email.trim();return e.jsxs("div",{className:"absolute inset-0 z-[4005] bg-white/95 backdrop-blur-md flex flex-col",children:[e.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Report a bug"}),e.jsx("button",{className:"px-2 py-1 text-xs rounded-md border bg-white",onClick:be,disabled:N,children:"Close"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 text-sm text-slate-800",children:[e.jsx("p",{className:"text-xs text-slate-600",children:"Share what went wrong and we’ll follow up inside 1 business day. Attach screenshots or PDFs if helpful."}),e.jsxs("label",{className:"block space-y-1",children:[e.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Name"}),e.jsx("input",{className:"w-full border rounded-md px-2 py-1",placeholder:"Your name",value:D.name,onChange:le("name"),disabled:N})]}),e.jsxs("label",{className:"block space-y-1",children:[e.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Email*"}),e.jsx("input",{className:"w-full border rounded-md px-2 py-1",placeholder:"you@example.com",type:"email",value:D.email,onChange:le("email"),disabled:N,required:!0})]}),e.jsxs("label",{className:"block space-y-1",children:[e.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-600",children:"Phone"}),e.jsx("input",{className:"w-full border rounded-md px-2 py-1",placeholder:"Optional",value:D.phone,onChange:le("phone"),disabled:N})]}),e.jsxs("label",{className:"block space-y-1",children:[e.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-600",children:"What happened?*"}),e.jsx("textarea",{className:"w-full border rounded-md px-2 py-2 min-h-[96px]",placeholder:"Tell us what you expected and what you saw instead",value:D.description,onChange:le("description"),disabled:N,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-600",children:[e.jsx("span",{children:"Attachments (up to 3 · PNG/JPEG/PDF · 10MB total)"}),e.jsx("button",{className:"px-2 py-1 border rounded-md bg-white",onClick:()=>{document.getElementById("bvx-support-bug-files")?.click()},type:"button",disabled:N||y.length>=3,children:y.length>=3?"Limit reached":"Add files"}),e.jsx("input",{id:"bvx-support-bug-files",type:"file",multiple:!0,accept:"image/png,image/jpeg,application/pdf",className:"hidden",onChange:Ce,disabled:N})]}),y.length===0&&e.jsx("div",{className:"text-xs text-slate-500",children:"No files attached."}),e.jsx("ul",{className:"space-y-1",children:y.map((m,E)=>e.jsxs("li",{className:"flex items-center justify-between text-xs rounded-md border px-2 py-1 bg-white",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-700",children:m.file.name}),e.jsx("div",{className:`text-[11px] ${m.error?"text-rose-600":"text-slate-500"}`,children:m.error?m.error:`${Math.round(m.file.size/1024)} KB`})]}),e.jsx("button",{className:"px-1.5 py-0.5 text-[11px] border rounded-md bg-white",onClick:()=>F(E),disabled:N,children:"Remove"})]},`${m.file.name}-${E}`))}),f&&e.jsx("div",{className:"text-xs text-rose-600",children:"Combined file size can’t exceed 10MB."})]}),ye&&e.jsx("div",{className:"text-xs text-rose-600",children:ye}),_e&&e.jsx("div",{className:"text-xs text-emerald-600",children:_e})]}),e.jsxs("div",{className:"px-4 py-3 border-t flex items-center gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded-md bg-slate-900 text-white text-sm disabled:bg-slate-400",onClick:Se,disabled:w,children:"Submit bug"}),e.jsx("button",{className:"px-3 py-2 text-sm rounded-md border bg-white",onClick:q,type:"button",disabled:N,children:"Reset"})]})]})},de=g,ke=!!g;return e.jsxs(e.Fragment,{children:[!s&&!d&&e.jsx(Ve,{children:e.jsx("div",{className:"fixed inset-0 pointer-events-none",children:e.jsx("button",{"aria-label":"Open support",onClick:()=>i(!0),className:"pointer-events-auto absolute right-4 bottom-4 rounded-full border bg-white px-4 py-2 shadow-md text-sm text-slate-900 hover:shadow-lg","data-bvx":"support-bubble-button",children:"support"})})}),d&&e.jsxs(Ve,{children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0",onClick:()=>i(!1)}),e.jsxs("div",{className:"absolute right-4 bottom-4 w-[min(36vw,420px)] max-w-[92vw] h-[min(48vh,560px)] max-h-[78vh] pointer-events-auto",children:[e.jsxs("div",{className:"flex h-full w-full flex-col rounded-2xl border bg-white shadow-2xl",style:{backgroundColor:"rgba(255,255,255,1)"},children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"brandVX support"}),e.jsx("button",{className:"px-2 py-1 text-xs rounded-md border bg-white",onClick:()=>i(!1),children:"Close"})]}),e.jsxs("div",{className:"px-3 py-2 border-b bg-slate-50",children:[e.jsx("div",{className:"text-[11px] text-slate-600 mb-2",children:"Pick an option below or keep chatting with our team."}),e.jsxs("div",{className:"grid grid-cols-1 gap-1.5",children:[e.jsxs("a",{href:"https://discord.gg/FDGaphZ4",target:"_blank",rel:"noreferrer",className:"inline-flex items-center justify-between rounded-lg border bg-white px-3 py-2 text-sm text-slate-800 hover:border-slate-400 transition",children:[e.jsx("span",{children:"Join the Support Discord"}),e.jsx("span",{className:"text-xs text-slate-500",children:"new window"})]}),e.jsxs("a",{href:de,...ke?{target:"_blank",rel:"noreferrer"}:{},className:"inline-flex items-center justify-between rounded-lg border bg-white px-3 py-2 text-sm text-slate-800 hover:border-slate-400 transition",children:[e.jsx("span",{children:"Book onboarding"}),e.jsx("span",{className:"text-xs text-slate-500",children:"already set up"})]}),e.jsxs("button",{className:"inline-flex items-center justify-between rounded-lg border bg-white px-3 py-2 text-sm text-slate-800 hover:border-slate-400 transition",onClick:X,children:[e.jsx("span",{children:"Report a bug"}),e.jsx("span",{className:"text-xs text-slate-500",children:"share details"})]})]})]}),e.jsx("div",{ref:me,className:"flex-1 min-h-0 overflow-y-auto p-3 text-sm text-slate-800",children:e.jsx("div",{className:"space-y-2",children:u.map((c,f)=>e.jsx("div",{className:c.role==="user"?"text-right":"text-left",children:c.role==="user"?e.jsx("span",{className:"inline-block px-3 py-2 rounded-full bg-sky-50 text-slate-900 max-w-[90%] whitespace-pre-wrap break-words",children:c.content}):e.jsx("div",{className:"inline-block px-2 py-1 rounded-lg bg-slate-50 text-slate-900 max-w-[96%] whitespace-pre-wrap break-words",children:c.content})},f))})}),e.jsxs("div",{className:"px-3 py-2 border-t",children:[k&&e.jsxs("div",{className:"mb-2 text-[11px] text-slate-600",children:["sign in to chat with brandVX support. ",e.jsx("a",{className:"underline",href:"/login",children:"Sign in"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("textarea",{className:"flex-1 border rounded-md px-2 py-1 text-sm",rows:2,placeholder:K?"Sending…":"Type your question and press Enter",value:$,onChange:c=>W(c.target.value),onKeyDown:ce,disabled:K}),e.jsx("button",{className:"px-3 py-1.5 rounded-md border bg-white text-sm",onClick:ee,disabled:K,children:"Send"})]})]})]}),fe()]})]}),","]}),G&&De.createPortal(e.jsx("div",{className:"fixed right-4 bottom-16 z-[4001] pointer-events-none select-none",children:e.jsx("div",{className:"px-2 py-1 rounded-full border bg-white text-[11px] text-slate-900 shadow",children:"support ready"})}),document.body)]})}const pe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"https://api.brandvx.io",VITE_BETA_RECOMMEND_ONLY:"0",VITE_BOOKING_URL:"https://app.squareup.com/appointments/book/wa9po5tz5jxg3y/L3R340JYRARQK/start",VITE_DEV_AUTOCONNECT:"0",VITE_DISABLE_MOTION:"0",VITE_FEATURE_SOCIAL:"1",VITE_OAUTH_APPLE:"0",VITE_POSTHOG_HOST:"https://app.posthog.com",VITE_POSTHOG_KEY:"phx_Bk7zzgJWCaLyvNdooUEYWeTd8E6S4rHGQQB7eD9jUzc7uow",VITE_SHOW_REDIRECT_URIS:"0",VITE_STRIPE_PK:"pk_live_51RyvuWPc6PGNhmWgyrAJHjrLzHqQtFP68doiN4zXjIdwUmsT3GSAKpsXthWAUxQiDkMcxYdGZRokwFY52MFoSRIN002Gw00m3D",VITE_STRIPE_PRICE_147:"price_1S06UXPc6PGNhmWgwLwohes2",VITE_STRIPE_PRICE_97:"price_1S06W2Pc6PGNhmWgyEnKQwSH",VITE_STRIPE_TRIAL_DAYS:"7",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR3ZnZucWFqcndydXBycWJqeHBoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxMTAyNjAsImV4cCI6MjA3MDY4NjI2MH0.8dogGZIj3jK3NF3DwHrDpLCR_ri0sGcsbqJxllYgXOs",VITE_SUPABASE_URL:"https://dwfvnqajrwruprqbjxph.supabase.co"},Ae=[{key:"dashboard",label:"Dashboard",icon:e.jsx(Je,{size:18})},{key:"askvx",label:"askVX",icon:e.jsx(Xe,{size:18})},{key:"vision",label:"brandVZN",icon:e.jsx(Qe,{size:18})},{key:"upgradevx",label:"upgradeVX",icon:e.jsx(Ze,{size:18})},{key:"messages",label:"Messages",icon:e.jsx(et,{size:18})},{key:"contacts",label:"Clients",icon:e.jsx(tt,{size:18})},{key:"calendar",label:"Calendar",icon:e.jsx(nt,{size:18})},{key:"cadences",label:"Follow‑ups",icon:e.jsx(at,{size:18})},{key:"inventory",label:"Inventory",icon:e.jsx(st,{size:18})},{key:"approvals",label:"To-Do",icon:e.jsx(rt,{size:18})},{key:"integrations",label:"Settings",icon:e.jsx(ot,{size:18})}];function wt(){const s=He(),g=Ye(),d=new URLSearchParams(s.search),i=d.get("pane")||"dashboard",v=!!(d.get("provider")||d.get("connected")||d.get("postVerify")||d.get("return")==="workspace"),u=i==="integrations"&&v?"dashboard":i,_="https://app.squareup.com/appointments/book/wa9po5tz5jxg3y/L3R340JYRARQK/start",$="price_1S06UXPc6PGNhmWgwLwohes2",W="price_1S06W2Pc6PGNhmWgyEnKQwSH",K=7,x=String(pe?.VITE_STRIPE_BUY_BUTTON_47||""),k="pk_live_51RyvuWPc6PGNhmWgyrAJHjrLzHqQtFP68doiN4zXjIdwUmsT3GSAKpsXthWAUxQiDkMcxYdGZRokwFY52MFoSRIN002Gw00m3D",S=String(pe?.VITE_ONBOARDING_DEV_MODE||"0")==="1",me=!1,[G,H]=a.useState(!1),[ve,J]=a.useState(!1),[N,ge]=a.useState(""),[ye,B]=a.useState(!1),[_e,ie]=a.useState(!1),[D,he]=a.useState(0),[y,ae]=a.useState(null),[se,Te]=a.useState(!1),[ee,ce]=a.useState(""),[le,Ce]=a.useState([]),F=a.useMemo(()=>{try{return new URLSearchParams(s.search).get("debug")==="1"||localStorage.getItem("bvx_debug")==="1"}catch{return!1}},[s.search]),q=a.useCallback(n=>{try{const t=new Date().toLocaleTimeString();Ce(r=>[`${t} ${n}`,...r].slice(0,5)),console.info("[WorkspaceShell]",n)}catch{}},[]),X=a.useRef(u);a.useEffect(()=>{X.current=u},[u]);const be=a.useRef(G);a.useEffect(()=>{be.current=G},[G]);const Se=a.useRef(N);a.useEffect(()=>{Se.current=N},[N]);const fe=a.useRef(void 0);a.useEffect(()=>{F&&q(`billingOpen=${G?"1":"0"}`)},[G,F,q]),a.useEffect(()=>{y?.input?ce(y.input.defaultValue||""):ce("")},[y]);const de=a.useCallback(n=>new Promise(t=>setTimeout(t,n)),[]),ke=a.useCallback(n=>new Promise(t=>{fe.current=t,ae(n)}),[]),c=a.useCallback(n=>{const t=fe.current;fe.current=void 0;const r=n!==void 0?n:y?.input?ee.trim():void 0;ae(null),t&&t(r)},[y,ee]),f=a.useCallback(async(n,t)=>{const r=typeof t=="number"&&t>0?t:1/0,o=Date.now();for(;!n();){if(Date.now()-o>r)return!1;await de(80)}return!0},[de]),h=a.useRef(null),w=a.useRef(!1),m=a.useRef(!1),E=a.useRef(!1),re=a.useRef(null),[z,Q]=a.useState({phase:"idle",forced:!1,running:!1});a.useEffect(()=>{console.info("[onboarding] phase ->",z.phase)},[z.phase]);const te=a.useCallback(async n=>{if(X.current!==n)try{const t=new URLSearchParams(window.location.search);t.set("pane",n),g({pathname:"/workspace",search:`?${t.toString()}`},{replace:!1})}catch{window.location.href=`/workspace?pane=${encodeURIComponent(n)}`;return}await f(()=>X.current===n,12e3),await de(200)},[g,de,f]),xe=a.useCallback(async({forced:n})=>{console.info("showWelcomeEffect",{forced:n}),n&&ne.clearWelcome()},[]),Pe=a.useCallback(async({forced:n})=>{console.info("unifiedTour:start",{forced:n});try{document.body?.classList.remove("driver-active","driver-fade"),document.querySelectorAll(".driver-overlay, .driver-popover").forEach(t=>{try{t.parentElement?.removeChild(t)}catch{}})}catch{}return new Promise((t,r)=>{const o=()=>{window.removeEventListener("bvx:guide:dashboard:done",o),console.info("unifiedTour:complete"),t()};window.addEventListener("bvx:guide:dashboard:done",o,{once:!0});try{F&&q("tour:start dashboard"),setTimeout(()=>{try{L("dashboard")}catch{}},350),setTimeout(()=>{try{const p=document.querySelectorAll(".driver-overlay").length>0,I=document.querySelectorAll(".driver-popover").length>0,j=window.__bvxTourRetried===!0;if(p&&!I&&!j){window.__bvxTourRetried=!0,document.querySelectorAll(".driver-overlay, .driver-popover").forEach(A=>{try{A.parentElement?.removeChild(A)}catch{}}),document.body.classList.remove("driver-active","driver-fade","bvx-center-popover-body");try{const A=new URL(window.location.href);A.searchParams.set("nocenter","1"),window.history.replaceState({},"",A.toString())}catch{}L("dashboard")}}catch{}},700)}catch(p){window.removeEventListener("bvx:guide:dashboard:done",o),r(p instanceof Error?p:new Error(String(p)))}})},[F,q]),C=a.useCallback((n=!0)=>{const t=h.current;h.current=null,n&&ne.setBillingDismissed(),H(!1),J(!1),t?.(n);try{window.dispatchEvent(new CustomEvent("bvx:billing:closed"))}catch{}},[]),Ee=a.useCallback(async()=>{console.info("ensureBillingEffect noop")},[]),Ue=a.useCallback(async n=>{ne.setGuideDone(!0);try{localStorage.setItem("bvx_quickstart_completed","1")}catch{}try{window.dispatchEvent(new CustomEvent("bvx:quickstart:completed"))}catch{}try{const t=await O();t&&await l.post("/settings",{tenant_id:t,guide_done:!0})}catch(t){console.error("guide_done update failed",t)}},[]),qe=a.useCallback(async({error:n})=>{await ke({title:"Flow paused",body:e.jsxs("div",{className:"text-sm text-slate-700",children:["Something interrupted the guided steps. ",n?.message?`(${n.message})`:"You can continue exploring manually and rerun the tour later."]}),buttons:[{label:"Continue",value:"ok",tone:"primary"}]})},[ke]),Me=a.useCallback((n,t)=>{if(F)try{const r=t?` ${JSON.stringify(t)}`:"";q(`${n}${r}`)}catch{q(n)}},[F,q]),we=mt({showWelcome:xe,runTour:Pe,ensureBilling:Ee,runDashboardGuide:async()=>{},runQuickstart:async()=>{},complete:Ue,handleError:qe},{exposeDebugHelpers:F,logger:Me});a.useEffect(()=>(Q(we.getState()),we.subscribe(Q)),[we]),a.useEffect(()=>{if(S)try{const n=window.location.pathname.startsWith("/onboarding"),t=sessionStorage.getItem("bvx_dev_onboard_routed")==="1";!n&&!t&&(sessionStorage.setItem("bvx_dev_onboard_routed","1"),window.location.replace("/onboarding"))}catch{}},[S]),a.useEffect(()=>{if(S)try{localStorage.removeItem("bvx_guide_done"),localStorage.removeItem("bvx_quickstart_completed"),localStorage.removeItem("bvx_tour_seen_workspace_intro"),localStorage.removeItem("bvx_billing_dismissed"),localStorage.removeItem("bvx_founder_finale_seen"),localStorage.removeItem("bvx_last_tour_step"),localStorage.removeItem("bvx_nocenter"),localStorage.removeItem("bvx_force_start_tour"),localStorage.removeItem("bvx_force_welcome_modal"),sessionStorage.removeItem("bvx_intro_session")}catch{}},[S]),a.useEffect(()=>{const n=p=>{const j=p.detail?.pane;j&&(async()=>{try{F&&q(`guide:navigate -> ${j}`);try{if(j!=="dashboard"){const A=new URL(window.location.href);A.searchParams.get("tour")==="1"&&(A.searchParams.delete("tour"),window.history.replaceState({},"",A.toString()))}}catch{}await te(j);try{window.dispatchEvent(new CustomEvent("bvx:pane:ready",{detail:{pane:j}}))}catch{}}catch(A){console.error("guide navigate failed",A)}finally{try{window.dispatchEvent(new CustomEvent("bvx:guide:navigate:done",{detail:{pane:j}}))}catch{}}})()},t=p=>{const I=String(p.detail||"").trim();if(I)try{window.dispatchEvent(new CustomEvent("bvx:flow:vision-command",{detail:{action:"vision.prefill-prompt",prompt:I}}))}catch(j){console.error("prefill prompt failed",j)}},r=p=>{const I=p.detail||{};re.current=I;const j=!!I?.error;E.current=j},o=()=>{E.current=!0,re.current=null};return window.addEventListener("bvx:guide:navigate",n),window.addEventListener("bvx:guide:brandvzn:color",t),window.addEventListener("bvx:flow:contacts-imported",r),window.addEventListener("bvx:onboarding:skip-import",o),()=>{window.removeEventListener("bvx:guide:navigate",n),window.removeEventListener("bvx:guide:brandvzn:color",t),window.removeEventListener("bvx:flow:contacts-imported",r),window.removeEventListener("bvx:onboarding:skip-import",o)}},[te]),a.useEffect(()=>{const n=()=>{console.info("dashboard step: billing");const t=Se.current||"";let r=!1;try{r=localStorage.getItem("bvx_billing_prompted_once")==="1"}catch{}if(t==="active"&&r){try{localStorage.setItem("bvx_billing_dismissed","1")}catch{}return}if(ne.clearBillingDismissed(),!be.current){H(!0),h.current=(o=!0)=>{o&&ne.setBillingDismissed(),H(!1),J(!1),h.current=null};try{localStorage.setItem("bvx_billing_prompted_once","1")}catch{}m.current&&setTimeout(()=>C(!0),800)}};return window.addEventListener("bvx:guide:dashboard:billing",n),()=>window.removeEventListener("bvx:guide:dashboard:billing",n)},[]),a.useEffect(()=>{const n=new URLSearchParams(s.search).get("pane")||"dashboard",t=(()=>{try{return localStorage.getItem("bvx_onboarding_done")==="1"}catch{return!1}})(),r=(()=>{try{return ne.getGuideDone()}catch{return!1}})();n==="dashboard"&&(S||t&&!r)&&!w.current&&(w.current=!0,(async()=>{try{document.querySelectorAll(".driver-overlay, .driver-popover").forEach(p=>{try{p.parentElement?.removeChild(p)}catch{}}),document.body.classList.remove("driver-active","driver-fade","bvx-center-popover-body")}catch{}try{window.__bvxDashReady===1||await new Promise(I=>{let j=!1;const A=window.setTimeout(()=>{j||(j=!0,I())},3e3),R=()=>{j||(j=!0,window.clearTimeout(A),I())};window.addEventListener("bvx:dashboard:ready",R,{once:!0})})}catch{}we.start({force:!1}).catch(p=>console.error("onboarding start failed",p))})())},[s.search,we,S]),a.useEffect(()=>{if(S)try{if(sessionStorage.getItem("bvx_dev_tour_started")==="1")return;const n=()=>{try{sessionStorage.setItem("bvx_dev_tour_started","1")}catch{}};return window.addEventListener("bvx:guide:dashboard:done",n,{once:!0}),()=>window.removeEventListener("bvx:guide:dashboard:done",n)}catch{}},[S]),a.useEffect(()=>{(async()=>{try{const n=await O();if(!n)return;const t=await l.get(`/ai/memories/list?tenant_id=${encodeURIComponent(n)}&limit=50`),r=Date.now()-30*864e5,o=Array.isArray(t?.items)?t.items.filter(p=>Number(p?.updated_at||0)*1e3>=r):[];try{window.__bvxMemories=o}catch{}}catch(n){console.warn("workspace memories load failed",n)}})()},[]),a.useEffect(()=>{(async()=>{try{try{new URLSearchParams(s.search).get("e2e")==="1"&&(localStorage.setItem("bvx_billing_dismissed","1"),localStorage.setItem("bvx_tour_seen_workspace_intro","1"),sessionStorage.setItem("bvx_intro_session","1"))}catch{}{let R=(await Z.auth.getSession()).data.session;if(!R){const V=localStorage.getItem("bvx_auth_ready")==="1",b=localStorage.getItem("bvx_auth_in_progress")==="1";if(V||b)for(let T=0;T<10&&(await new Promise(U=>setTimeout(U,600)),R=(await Z.auth.getSession()).data.session,!R);T++);if(!R){g("/login");return}}}const n=new URLSearchParams(s.search);try{const R=n.get("pane"),V=n.get("flow")==="connect"||!!n.get("provider")||!!n.get("error");if(R==="integrations"&&!V){const b=new URL(window.location.href);b.searchParams.set("pane","dashboard"),b.searchParams.delete("provider"),b.searchParams.delete("connected"),b.searchParams.delete("postVerify"),window.history.replaceState({},"",b.toString())}try{const b=n.get("tour"),T=n.get("pane")||"dashboard";if(b==="1"&&T!=="dashboard"){const U=new URL(window.location.href);U.searchParams.delete("tour"),window.history.replaceState({},"",U.toString())}}catch{}}catch{}try{const R=n.get("provider")||"",V=n.get("connected")==="1";if(R&&V){const b=new URL(window.location.href);b.pathname="/workspace",b.searchParams.set("pane","dashboard"),b.searchParams.delete("provider"),b.searchParams.delete("connected"),b.searchParams.delete("error"),window.history.replaceState({},"",b.toString())}}catch{}if(n.get("billing")==="success"){try{oe("billing_success")}catch{}try{localStorage.setItem("bvx_billing_dismissed","1")}catch{}H(!1);try{const R=(await Z.auth.getSession()).data.session&&localStorage.getItem("bvx_tenant")||"";if(R)for(let V=0;V<12;V++){try{const b=await l.get(`/settings?tenant_id=${encodeURIComponent(R)}`),T=String(b?.data?.subscription_status||"");if(T==="active"||T==="trialing"){ge(T);break}}catch{}await new Promise(b=>setTimeout(b,1500))}}catch{}return}const t=localStorage.getItem("bvx_billing_dismissed")==="1",r=(await Z.auth.getSession()).data.session&&localStorage.getItem("bvx_tenant")||"",o=await l.get(`/settings${r?`?tenant_id=${encodeURIComponent(r)}`:""}`),p=String(o?.data?.subscription_status||"");ge(p);try{const R=String(o?.data?.plan_code||"").toLowerCase(),V=String(o?.data?.subscription_price_id||"").toLowerCase(),T=!(String(pe?.VITE_BETA_OPEN_TOOLS||"0")==="1")&&(R.includes("lite")||R.includes("47")||V.includes("price_1s8svi")||/(^|\b)47(\b|$)/.test(R));Te(T)}catch{}const I=p==="active",j=n.get("billing"),A=n.get("forceBilling")==="1";if(j==="prompt"&&!I&&!t||A){H(!0);try{oe("billing_modal_open")}catch{}}else(!be.current||I||t)&&z.phase!=="billing"&&H(!1);try{if(!!(o?.data?.onboarding_completed||o?.data?.onboarding_done))try{localStorage.setItem("bvx_onboarding_done","1")}catch{}if(!!o?.data?.welcome_seen)try{sessionStorage.setItem("bvx_intro_session","1")}catch{}const b=!!o?.data?.guide_done;ne.setGuideDone(b);try{const T=Number(o?.data?.trial_end_ts||o?.data?.trialEndsAt||0);let U=0;if(T&&T>0)U=Math.max(0,Math.ceil((T*1e3-Date.now())/(1440*60*1e3)));else{let Ne=Number(localStorage.getItem("bvx_trial_started_at")||"0");Ne||(Ne=Date.now(),localStorage.setItem("bvx_trial_started_at",String(Ne)));const We=Math.floor((Date.now()-Ne)/(1440*60*1e3));U=Math.max(0,7-We)}he(U),p==="trialing"&&U>0&&B(!0),p!=="active"&&U<=0&&ie(!0)}catch{}}catch{}try{localStorage.getItem("bvx_booking_nudge")==="1"&&_&&(localStorage.removeItem("bvx_booking_nudge"),setTimeout(()=>{try{const V=document.querySelector('[data-tour="book-onboarding"]');if(!V)return;const b=document.createElement("div");b.setAttribute("role","dialog"),b.style.position="fixed";const T=V.getBoundingClientRect();b.style.left=`${T.left}px`,b.style.top=`${Math.max(8,T.top-44)}px`,b.style.zIndex="9999",b.className="pointer-events-auto",b.innerHTML=`<a href="${_}" target="_blank" rel="noreferrer" class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full border bg-white shadow text-sm text-slate-900">Click here to book a one‑on‑one onboarding for brand VX</a>`,document.body.appendChild(b);const U=()=>{try{document.body.removeChild(b)}catch{}};setTimeout(U,6e3),b.addEventListener("click",U,{once:!0})}catch{}},600))}catch{}}catch{}})()},[s.search,z.phase,me]);const P=n=>{try{const t=new URLSearchParams(s.search);t.set("pane",n),g({pathname:"/workspace",search:`?${t.toString()}`},{replace:!1})}catch{window.location.href=`/workspace?pane=${encodeURIComponent(n)}`}},$e=(()=>{switch(u){case"dashboard":return e.jsx(vt,{});case"messages":return e.jsx(yt,{});case"contacts":return e.jsx(_t,{});case"calendar":return e.jsx(St,{});case"cadences":return e.jsx(kt,{});case"inventory":return e.jsx(Et,{});case"integrations":return e.jsx(It,{});case"approvals":return e.jsx(jt,{});case"askvx":return e.jsx(Nt,{});case"vision":return e.jsx(Rt,{});case"upgradevx":return setTimeout(()=>{try{window.dispatchEvent(new CustomEvent("bvx:billing:prompt"))}catch{}try{g("/billing")}catch{}},0),e.jsx("div",{});default:return e.jsx("div",{})}})(),M=a.useMemo(()=>{const n=String(pe?.VITE_BETA_OPEN_TOOLS||"0")==="1";if(se&&!n){const t=[],r=o=>{const p=Ae.find(I=>I.key===o);p&&t.push(p)};return r("askvx"),r("vision"),r("upgradevx"),t}return Ae},[se]),[Le,Ie]=a.useState(0),[Oe,je]=a.useState(0);a.useEffect(()=>{(async()=>{try{if(!(await Z.auth.getSession()).data.session?.access_token){Ie(0),je(0);return}const t=await O();if(!t){Ie(0),je(0);return}const r=await l.get(`/approvals?tenant_id=${encodeURIComponent(t)}`),p=((Array.isArray(r)?r:r?.items||[])||[]).filter(I=>String(I?.status||"pending")==="pending").length;Ie(p);try{const I=await l.get(`/cadences/queue?tenant_id=${encodeURIComponent(t)}`),j=Array.isArray(I?.items)?I.items.length:0;je(j)}catch{je(0)}}catch{Ie(0)}})()},[s.search]);const ue=a.useRef([]);a.useEffect(()=>{ue.current=ue.current.slice(0,M.length)},[M.length]),a.useEffect(()=>{const n=String(pe?.VITE_BETA_OPEN_TOOLS||"0")==="1";if(!se||n)return;if(!new Set(["askvx","vision","upgradevx"]).has(u))try{P("askvx")}catch{}},[se,u]);const Ge=n=>{const t=M.findIndex(o=>o.key===u);if(n.key==="ArrowDown"){n.preventDefault();const o=(t+1)%M.length;P(M[o].key),ue.current[o]?.focus()}if(n.key==="ArrowUp"){n.preventDefault();const o=(t-1+M.length)%M.length;P(M[o].key),ue.current[o]?.focus()}n.key==="Enter"&&(n.preventDefault(),P(M[t].key));const r=parseInt(n.key,10);if(!Number.isNaN(r)&&r>=1&&r<=M.length){n.preventDefault();const o=r-1;P(M[o].key),ue.current[o]?.focus()}if((n.ctrlKey||n.metaKey)&&n.key==="/"){n.preventDefault();try{L(u)}catch{}}if((n.ctrlKey||n.metaKey)&&n.shiftKey&&n.key==="?"){n.preventDefault();try{const o=localStorage.getItem("bvx_last_tour_page")||u,p=Number(localStorage.getItem("bvx_last_tour_step")||"0")||0;L(o,{step:p})}catch{}}if(n.key==="?"){n.preventDefault();try{L(u)}catch{}}};a.useEffect(()=>{const n=dt();return ze({"nav.dashboard":{id:"nav.dashboard",run:()=>P("dashboard")},"nav.messages":{id:"nav.messages",run:()=>P("messages")},"nav.contacts":{id:"nav.contacts",run:()=>P("contacts")},"nav.calendar":{id:"nav.calendar",run:()=>P("calendar")},"nav.cadences":{id:"nav.cadences",run:()=>P("cadences")},"nav.inventory":{id:"nav.inventory",run:()=>P("inventory")},"nav.integrations":{id:"nav.integrations",run:()=>P("integrations")},"nav.approvals":{id:"nav.approvals",run:()=>P("approvals")},"nav.styles":{id:"nav.styles",run:()=>P("dashboard")},"nav.askvx":{id:"nav.askvx",run:()=>P("askvx")},"nav.vision":{id:"nav.vision",run:()=>P("vision")},"guide.dashboard":{id:"guide.dashboard",run:()=>L("dashboard")},"guide.integrations":{id:"guide.integrations",run:()=>L("integrations")},"guide.workflows":{id:"guide.workflows",run:()=>L("dashboard")},"guide.messages":{id:"guide.messages",run:()=>L("messages")},"guide.contacts":{id:"guide.contacts",run:()=>L("contacts")},"guide.calendar":{id:"guide.calendar",run:()=>L("calendar")},"guide.cadences":{id:"guide.cadences",run:()=>L("cadences")},"guide.inventory":{id:"guide.inventory",run:()=>L("inventory")},"guide.approvals":{id:"guide.approvals",run:()=>L("approvals")},"guide.inbox":{id:"guide.inbox",run:()=>L("inbox")},"nav.wow":{id:"nav.wow",run:()=>{window.location.assign("/wow")}},"integrations.reanalyze":{id:"integrations.reanalyze",run:async()=>{try{await l.post("/onboarding/analyze",{})}catch{}}},"integrations.square.import_contacts":{id:"integrations.square.import_contacts",run:async()=>{try{const t=localStorage.getItem("bvx_tenant")||"";await l.post("/ai/tools/execute",{tenant_id:t,name:"contacts.import.square",params:{tenant_id:t},require_approval:!1,idempotency_key:`square_import_${Date.now()}`})}catch{}}},"integrations.twilio.provision":{id:"integrations.twilio.provision",run:async t=>{try{const r=localStorage.getItem("bvx_tenant")||"";await l.post("/ai/tools/execute",{tenant_id:r,name:"integrations.twilio.provision",params:{tenant_id:r,area_code:String(t||"")},require_approval:!1})}catch{}}},"integrations.sendgrid.test_email":{id:"integrations.sendgrid.test_email",run:async()=>{try{const t=localStorage.getItem("bvx_tenant")||"";await l.post("/ai/tools/execute",{tenant_id:t,name:"messages.send",params:{tenant_id:t,contact_id:"c_demo",channel:"email",subject:"BrandVX Test",body:"<p>Hello from BrandVX</p>"},require_approval:!1})}catch{}}},"integrations.hubspot.upsert_sample":{id:"integrations.hubspot.upsert_sample",run:async()=>{try{const t=localStorage.getItem("bvx_tenant")||"";await l.post("/integrations/crm/hubspot/upsert",{tenant_id:t,obj_type:"contact",attrs:{email:"demo@example.com",firstName:"Demo",lastName:"User"},idempotency_key:"demo_contact_1"})}catch{}}},"integrations.acuity.import_sample":{id:"integrations.acuity.import_sample",run:async()=>{try{const t=localStorage.getItem("bvx_tenant")||"";await l.post("/integrations/booking/acuity/import",{tenant_id:t,since:"0",until:"",cursor:""})}catch{}}},"integrations.redirects.copy":{id:"integrations.redirects.copy",run:async()=>{try{const t=await l.get("/integrations/redirects"),r=[];Object.entries(t?.oauth||{}).forEach(([o,p])=>r.push(`${o}: ${p}`)),Object.entries(t?.webhooks||{}).forEach(([o,p])=>r.push(`${o} webhook: ${p}`)),await navigator.clipboard?.writeText(r.join(`
`))}catch{}}},"integrations.connect":{id:"integrations.connect",run:async t=>{try{const r=localStorage.getItem("bvx_tenant")||"",o=await l.get(`/oauth/${t}/login?tenant_id=${encodeURIComponent(r)}`),p=String(o?.url||"");p&&window.location.assign(p)}catch{}}},"integrations.refresh":{id:"integrations.refresh",run:async t=>{try{const r=localStorage.getItem("bvx_tenant")||"";await l.post("/oauth/refresh",{tenant_id:r,provider:t})}catch{}}},"messages.send":{id:"messages.send",run:async(t,r,o)=>{try{const p=localStorage.getItem("bvx_tenant")||"";await l.post("/messages/send",{tenant_id:p,contact_id:t,channel:r,body:o})}catch{}}},"messages.simulate":{id:"messages.simulate",run:async(t,r)=>{try{const o=localStorage.getItem("bvx_tenant")||"";await l.post("/messages/simulate",{tenant_id:o,contact_id:t,channel:r,generate:!1})}catch{}}},"messages.copy.text":{id:"messages.copy.text",run:async t=>{try{await navigator.clipboard?.writeText(String(t||""))}catch{}}},"messages.open.sms":{id:"messages.open.sms",run:(t,r)=>{try{window.location.href=`sms:${encodeURIComponent(t||"")}&body=${encodeURIComponent(r||"")}`}catch{}}},"messages.open.mail":{id:"messages.open.mail",run:(t,r,o)=>{try{window.location.href=`mailto:${encodeURIComponent(t||"")}?subject=${encodeURIComponent(r||"")}&body=${encodeURIComponent(o||"")}`}catch{}}},"contacts.get_candidates":{id:"contacts.get_candidates",run:async()=>{try{const t=localStorage.getItem("bvx_tenant")||"";return await l.get(`/import/candidates?tenant_id=${encodeURIComponent(t)}`)}catch(t){return{error:String(t?.message||t)}}}},"contacts.import":{id:"contacts.import",run:async t=>{try{const r=localStorage.getItem("bvx_tenant")||"";await l.post("/import/contacts",{tenant_id:r,contacts:Array.isArray(t)?t:[]})}catch{}}},"recon.import_missing_contacts":{id:"recon.import_missing_contacts",run:async()=>{try{const t=localStorage.getItem("bvx_tenant")||"";await l.post("/reconciliation/import_missing_contacts",{tenant_id:t})}catch{}}},"calendar.preview_reminders":{id:"calendar.preview_reminders",run:async()=>({status:"not_available"})},"cadences.start":{id:"cadences.start",run:async(t,r)=>{try{const o=localStorage.getItem("bvx_tenant")||"";await l.post("/cadences/start",{tenant_id:o,contact_id:t,cadence_id:r})}catch{}}},"cadences.stop":{id:"cadences.stop",run:async(t,r)=>{try{const o=localStorage.getItem("bvx_tenant")||"";await l.post(`/cadences/stop?tenant_id=${encodeURIComponent(o)}&contact_id=${encodeURIComponent(t)}&cadence_id=${encodeURIComponent(r)}`,{})}catch{}}},"scheduler.tick":{id:"scheduler.tick",run:async()=>{try{const t=localStorage.getItem("bvx_tenant")||"";await l.post("/scheduler/tick",{tenant_id:t})}catch{}}},"workflows.run.dedupe":{id:"workflows.run.dedupe",run:async()=>{try{const t=localStorage.getItem("bvx_tenant")||"";await l.post("/ai/tools/execute",{tenant_id:t,name:"contacts.dedupe",params:{tenant_id:t},require_approval:!0})}catch{}}},"workflows.run.lowstock":{id:"workflows.run.lowstock",run:async()=>{try{const t=localStorage.getItem("bvx_tenant")||"";await l.post("/ai/tools/execute",{tenant_id:t,name:"inventory.alerts.get",params:{tenant_id:t,low_stock_threshold:Number(localStorage.getItem("bvx_low_threshold")||"5")},require_approval:!1})}catch{}}},"workflows.run.reminders":{id:"workflows.run.reminders",run:async()=>{try{const t=localStorage.getItem("bvx_tenant")||"";await l.post("/ai/tools/execute",{tenant_id:t,name:"appointments.schedule_reminders",params:{tenant_id:t},require_approval:!1})}catch{}}},"workflows.run.dormant_preview":{id:"workflows.run.dormant_preview",run:async(t=60)=>{try{const r=localStorage.getItem("bvx_tenant")||"";await l.post("/ai/tools/execute",{tenant_id:r,name:"campaigns.dormant.preview",params:{tenant_id:r,threshold_days:t},require_approval:!1})}catch{}}},"workflows.run.social_plan":{id:"workflows.run.social_plan",run:async()=>{try{const t=localStorage.getItem("bvx_tenant")||"";await l.post("/ai/tools/execute",{tenant_id:t,name:"social.schedule.14days",params:{tenant_id:t},require_approval:!0})}catch{}}},"approvals.approve":{id:"approvals.approve",run:async()=>{try{return window.location.assign("/workspace?pane=approvals"),{status:"navigate"}}catch{}}},"approvals.reject":{id:"approvals.reject",run:async()=>{try{return window.location.assign("/workspace?pane=approvals"),{status:"navigate"}}catch{}}},"settings.update":{id:"settings.update",run:async t=>{try{const r=localStorage.getItem("bvx_tenant")||"";await l.post("/settings",{tenant_id:r,...t||{}})}catch{}}},"settings.quiet_hours":{id:"settings.quiet_hours",run:async(t,r)=>{try{const o=localStorage.getItem("bvx_tenant")||"";await l.post("/settings",{tenant_id:o,quiet_hours:{start:t,end:r}})}catch{}}},"settings.brand_profile":{id:"settings.brand_profile",run:async t=>{try{const r=localStorage.getItem("bvx_tenant")||"";await l.post("/settings",{tenant_id:r,brand_profile:t})}catch{}}},"settings.goals":{id:"settings.goals",run:async t=>{try{const r=localStorage.getItem("bvx_tenant")||"";await l.post("/settings",{tenant_id:r,goals:t})}catch{}}},"share.create":{id:"share.create",run:async(t,r)=>{try{const o=localStorage.getItem("bvx_tenant")||"";return await l.post("/share/create",{tenant_id:o,title:t,description:r})}catch(o){return{error:String(o?.message||o)}}}},"usage.limits.get":{id:"usage.limits.get",run:async()=>{try{const t=localStorage.getItem("bvx_tenant")||"";return(await l.get(`/settings?tenant_id=${encodeURIComponent(t)}`))?.data?.usage_limits||{}}catch(t){return{error:String(t?.message||t)}}}},"config.get":{id:"config.get",run:()=>{try{return{recommend_only:!!(pe?.VITE_RECOMMEND_ONLY==="1"||!1)}}catch{return{recommend_only:!1}}}},"admin.clear_cache":{id:"admin.clear_cache",run:async(t="all")=>{try{const r=localStorage.getItem("bvx_tenant")||"";await l.post("/admin/cache/clear",{tenant_id:r,scope:t})}catch{}}}}),n},[]),a.useEffect(()=>{try{const n=async()=>{try{localStorage.setItem("bvx_billing_dismissed","")}catch{}try{const t=await O();if(t){const r=await l.get(`/settings?tenant_id=${encodeURIComponent(t)}`);if(String(r?.data?.subscription_status||"")==="active")return}}catch{}H(!0);try{oe("billing_modal_open")}catch{}};return window.addEventListener("bvx:billing:prompt",n),()=>window.removeEventListener("bvx:billing:prompt",n)}catch{}},[]),a.useEffect(()=>{try{const n=x.startsWith("buy_btn_");if(!G||!n||!k||window.__bvxStripeBuyLoaded)return;const t="bvx-stripe-buy-button-js";if(!document.getElementById(t)){const r=document.createElement("script");r.id=t,r.async=!0,r.src="https://js.stripe.com/v3/buy-button.js",document.head.appendChild(r)}window.__bvxStripeBuyLoaded=!0}catch{}},[G,x,k]);const Fe=a.useMemo(()=>{const n=x,t=k;if(!n.startsWith("buy_btn_")||!t)return"";const o=n.replace(/"/g,"&quot;"),p=t.replace(/"/g,"&quot;");return`<stripe-buy-button buy-button-id="${o}" publishable-key="${p}"></stripe-buy-button>`},[x,k]);return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{id:"tour-welcome-anchor",className:"fixed inset-0 pointer-events-none",style:{zIndex:2147483602}}),e.jsx("div",{id:"tour-center-anchor",className:"fixed",style:{top:"50%",left:"50%",width:0,height:0,opacity:0,pointerEvents:"none",transform:"translate(-50%, -50%)",zIndex:2147483602}}),e.jsx("div",{id:"tour-billing-anchor",className:"fixed inset-0 pointer-events-none flex items-center justify-center",style:{zIndex:2147483602}}),e.jsx("div",{id:"e2e-ready","data-pane":u,style:{position:"absolute",opacity:0,pointerEvents:"none"}}),F&&e.jsxs("div",{className:"fixed right-2 z-[3000] text-[11px] bg-yellow-100 border border-yellow-300 text-yellow-900 rounded-md px-2 py-1 shadow-sm pointer-events-auto",style:{bottom:"calc(env(safe-area-inset-bottom,0px) + 96px)"},"data-debug-panel":!0,children:[e.jsxs("div",{children:["dbg pane=",u," status=",N||"n/a"," open=",G?"1":"0"," phase=",z.phase," running=",z.running?"1":"0"]}),e.jsxs("div",{children:["overlay=",typeof document<"u"?document.querySelectorAll(".driver-overlay").length:0," pop=",typeof document<"u"?document.querySelectorAll(".driver-popover").length:0]}),e.jsxs("div",{children:["ready dash=",window.__bvxDashReady?"1":"0"," msgs=",window.__bvxMessagesReady?"1":"0"," inv=",window.__bvxInventoryReady?"1":"0"]}),e.jsx("div",{children:e.jsx("button",{className:"underline",onClick:()=>{try{L("dashboard")}catch{}},children:"Restart tour"})}),le.map((n,t)=>e.jsx("div",{children:n},t))]}),e.jsxs("div",{className:"h-[100dvh] grid grid-cols-[theme(spacing.64)_1fr] gap-4 md:gap-5 overflow-hidden pb-2 relative md:[--sticky-offset:88px] [--sticky-offset:70px]",children:[e.jsxs("aside",{className:"h-full min-h-0 bg-white/70 backdrop-blur border border-b-0 rounded-2xl p-0 flex flex-col relative","aria-label":"Primary navigation",children:[e.jsx("nav",{className:"flex flex-col gap-1 mt-[2px] px-[3px]",role:"tablist","aria-orientation":"vertical",onKeyDown:Ge,children:M.map((n,t)=>{const r=u===n.key;return e.jsxs(Ke,{ref:o=>{o&&(ue.current[t]=o)},to:`/workspace?pane=${encodeURIComponent(n.key)}`,role:"tab","aria-selected":r,"aria-current":r?"page":void 0,title:`${n.label}  •  ${t+1}`,"data-tour":`nav-${n.key}`,className:`relative w-full h-11 flex items-center gap-3 pl-4 pr-4 rounded-full border [font-family:var(--font-display)] transition focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)] focus-visible:ring-offset-2 focus-visible:ring-offset-white ${r?"bg-[var(--brand-50)] text-ink-900 border-black shadow-sm":"bg-[var(--brand-50)] text-ink-900 border-black hover:brightness-105"}`,children:[e.jsx("span",{className:"inline-flex items-center justify-center shrink-0 w-7 h-7 rounded-full border border-black bg-transparent text-ink-900 overflow-hidden",children:n.icon}),e.jsx("span",{className:"text-[15px] leading-none",children:n.label}),n.key==="approvals"&&Le>0&&e.jsx("span",{"aria-label":`${Le} pending`,className:"ml-1 inline-flex items-center justify-center min-w-[18px] h-[18px] text-[10px] px-1 rounded-full bg-amber-100 text-amber-900 border border-amber-200",children:Le}),n.key==="cadences"&&Oe>0&&e.jsx("span",{"aria-label":`${Oe} queued`,className:"ml-1 inline-flex items-center justify-center min-w-[18px] h-[18px] text-[10px] px-1 rounded-full bg-sky-100 text-sky-900 border border-sky-200",children:Oe})]},n.key)})}),e.jsxs("div",{className:"absolute left-[3px] right-[3px]",style:{bottom:"calc(env(safe-area-inset-bottom,0px) + 18px)"},children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(xt,{hideTrigger:!0}),e.jsx("button",{type:"button",className:"inline-flex w-full items-center justify-center rounded-full bg-slate-900 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-slate-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900 [font-family:var(--font-display)]",onClick:()=>{try{window.dispatchEvent(new CustomEvent("bvx:support:open",{detail:{source:"workspace-cta"}}))}catch{}},children:"Support"}),e.jsx("a",{href:_,target:"_blank",rel:"noreferrer",className:"inline-flex w-full items-center justify-center px-3 py-2 rounded-full border bg-white text-slate-900 hover:shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)] [font-family:var(--font-display)]","data-tour":"book-onboarding",children:"Book onboarding"})]}),e.jsx(Re,{variant:"outline",className:"w-full !rounded-full !py-2 text-left","data-guide":void 0,"data-tour":"signup",onClick:async()=>{try{localStorage.setItem("bvx_signed_out","1")}catch{}try{await Z.auth.signOut()}catch{}try{localStorage.removeItem("bvx_tenant")}catch{}window.location.href="/brandvx"},children:ct.ctas.liveOnly.signOut})]})]}),e.jsx("main",{className:"h-full rounded-2xl border border-b-0 border-l-slate-300/80 bg-white/90 backdrop-blur p-4 md:p-5 shadow-sm overflow-hidden border-l relative",children:e.jsx("div",{className:"rounded-xl bg-white/70 backdrop-blur min-h-full h-full overflow-y-auto pb-3",children:e.jsx(a.Suspense,{fallback:e.jsxs("div",{className:"p-4 text-slate-600 text-sm",children:["Loading ",Ae.find(n=>n.key===u)?.label,"…"]}),children:$e})})})]}),y&&De.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[2100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/30"}),e.jsxs("div",{className:"relative w-full max-w-md rounded-2xl border border-[var(--border)] bg-white p-5 shadow-soft text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-ink-900",children:y.title}),y.body&&e.jsx("div",{className:"mt-2 text-sm text-slate-700 text-left whitespace-pre-wrap",children:y.body}),y.input&&(y.input.textarea?e.jsx("textarea",{className:"mt-4 w-full rounded-md border px-3 py-2 text-sm",rows:4,placeholder:y.input.placeholder,value:ee,onChange:n=>ce(n.target.value)}):e.jsx("input",{className:"mt-4 w-full rounded-md border px-3 py-2 text-sm",placeholder:y.input.placeholder,value:ee,onChange:n=>ce(n.target.value)})),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2 justify-center",children:y.buttons.map((n,t)=>{const r=n.disabled||y.input?.required&&!ee.trim()&&n.value===void 0,p=(n.tone||"secondary")==="primary"?"inline-flex items-center justify-center px-4 py-2 rounded-full bg-slate-900 text-white hover:bg-slate-800 disabled:opacity-60":"inline-flex items-center justify-center px-4 py-2 rounded-full border bg-white text-slate-900 hover:bg-slate-50 disabled:opacity-60";return e.jsx("button",{type:"button",className:p,disabled:r,onClick:()=>c(n.value),children:n.label},t)})})]})]}),document.body),G&&e.jsxs("div",{className:"fixed inset-0 z-50 grid place-items-center p-4",children:[e.jsx("div",{"aria-hidden":!0,className:"absolute inset-0 bg-black/20",onClick:()=>C()}),e.jsxs("div",{className:"relative w-full max-w-md rounded-2xl border border-[var(--border)] bg-white p-5 shadow-soft",children:[e.jsx("div",{className:"text-ink-900 text-lg font-semibold",children:"Start your BrandVX"}),e.jsx("div",{className:"text-ink-700 text-sm mt-1",children:"Choose a plan to unlock your workspace. You can change anytime."}),e.jsxs("div",{className:"mt-4 grid gap-2",children:[e.jsxs("button",{disabled:ve,onClick:async()=>{try{oe("billing_trial_click")}catch{}J(!0);try{const n=await l.post("/billing/create-checkout-session",{price_id:$,mode:"subscription",trial_days:K});n?.url&&(C(),window.location.href=n.url)}finally{J(!1)}},className:"w-full rounded-xl border bg-gradient-to-b from-sky-50 to-sky-100 hover:from-sky-100 hover:to-sky-200 text-slate-900 px-4 py-3 text-sm text-left",children:[e.jsx("div",{className:"font-medium",children:"7‑day free trial → $147/mo"}),e.jsx("div",{className:"text-slate-600 text-xs",children:"You’ll be reminded before any charge."})]}),e.jsxs("button",{disabled:ve,onClick:async()=>{try{oe("billing_97_click")}catch{}J(!0);try{try{localStorage.setItem("bvx_founding_member","1")}catch{}const n=await l.post("/billing/create-checkout-session",{price_id:W,mode:"subscription"});n?.url&&(C(),window.location.href=n.url)}finally{J(!1)}},className:"w-full rounded-xl border bg-white hover:shadow-sm text-slate-900 px-4 py-3 text-sm text-left",children:[e.jsx("div",{className:"font-medium",children:"$97 today → $97/mo (Founding price)"}),e.jsx("div",{className:"text-slate-600 text-xs",children:"Lock in $97/mo now; recurring thereafter."})]}),x&&e.jsx("div",{className:"w-full grid place-items-center py-1",children:x.startsWith("buy_btn_")&&k?e.jsx("div",{className:"w-full flex items-center justify-center",dangerouslySetInnerHTML:{__html:Fe}}):e.jsx("a",{href:x,target:"_blank",rel:"noreferrer",className:"w-full inline-flex items-start rounded-xl border bg-white hover:shadow-sm text-slate-900 px-4 py-3 text-sm text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"brandVZN Lite — $47/mo"}),e.jsx("div",{className:"text-slate-600 text-xs",children:"Opens secure Stripe checkout in a new tab."})]})})}),e.jsx("button",{className:"w-full rounded-xl border bg-white hover:bg-slate-50 px-4 py-2 text-sm",onClick:()=>C(),children:"Skip for now"})]}),e.jsxs("div",{className:"text-[11px] text-ink-700 mt-2",children:["Status: ",N||"unavailable"]})]})]}),ye&&e.jsxs("div",{className:"fixed inset-0 z-[1100] grid place-items-center p-4",children:[e.jsx("div",{"aria-hidden":!0,className:"absolute inset-0 bg-black/20",onClick:()=>B(!1)}),e.jsxs("div",{className:"relative w-full max-w-md rounded-2xl border border-[var(--border)] bg-white p-5 shadow-soft",children:[e.jsx("div",{className:"text-ink-900 text-lg font-semibold",children:"Trial active"}),e.jsxs("div",{className:"text-ink-700 text-sm mt-1",children:[D," day",D===1?"":"s"," until payment of $147 is required."]}),e.jsxs("div",{className:"mt-3 flex gap-2 justify-end",children:[e.jsx(Re,{variant:"outline",onClick:()=>B(!1),children:"Close"}),e.jsx(Re,{onClick:()=>{B(!1),g("/billing")},children:"Add payment"})]})]})]}),_e&&e.jsxs("div",{className:"fixed inset-0 z-[2147483603] grid place-items-center p-4",children:[e.jsx("div",{"aria-hidden":!0,className:"absolute inset-0 bg-black/40"}),e.jsxs("div",{className:"relative w-full max-w-md rounded-2xl border border-[var(--border)] bg-white p-6 shadow-soft text-center",children:[e.jsx("div",{className:"text-ink-900 text-lg font-semibold",children:"Trial ended"}),e.jsx("div",{className:"text-ink-700 text-sm mt-1",children:"Add payment method to access your brandVX!"}),e.jsx("div",{className:"mt-3 flex gap-2 justify-center",children:e.jsx(Re,{onClick:()=>g("/billing"),children:"Add payment"})})]})]})]})}const vt=a.lazy(()=>Y(()=>import("./Dashboard-BoI9Fb6L.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))),yt=a.lazy(()=>Y(()=>import("./Messages-BJ6oeZgW.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,8,9,10,18,11,12,13,14,19,20]))),_t=a.lazy(()=>Y(()=>import("./Contacts-DOl3Xq_d.js"),__vite__mapDeps([21,1,2,3,4,5,6,7,8,9,10,14,22,19,11,12,13,20]))),St=a.lazy(()=>Y(()=>import("./Calendar-COuo-CO2.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,8,9,11,12,13,20,14,22,19]))),kt=a.lazy(()=>Y(()=>import("./Cadences-D3wfPyhB.js"),__vite__mapDeps([24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,18]))),Et=a.lazy(()=>Y(()=>import("./Inventory-KrBEQBXB.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9,11,12,13,22]))),It=a.lazy(()=>Y(()=>import("./Integrations-BWv2mJXR.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,8,9,10,12,13,20,15]))),jt=a.lazy(()=>Y(()=>import("./Approvals-CBkSWHo7.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,8,9,10,11,12,13,18,22,14,19]))),Nt=a.lazy(()=>Y(()=>import("./Ask-BYKfh9fy.js"),__vite__mapDeps([28,1,2,3,4,5,6,7,8,9,11,12,13,16]))),Rt=a.lazy(()=>Y(()=>import("./Vision-DYCd2mr8.js"),__vite__mapDeps([29,1,2,3,4,10,5,6,7,8,9,11,12,13])));function $t(){return e.jsx(wt,{})}export{$t as default};
