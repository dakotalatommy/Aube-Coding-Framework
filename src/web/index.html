<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>BrandVX Demo</title>
    <style>
      body { font-family: -apple-system, system-ui, sans-serif; margin: 2rem; }
      input, button, textarea { font-size: 14px; padding: 6px 8px; }
      .row { margin-bottom: 12px; }
      pre { background: #f6f8fa; padding: 12px; border-radius: 8px; }
    </style>
  </head>
  <body>
    <h1>BrandVX Minimal Demo</h1>
    <div class="row">
      <button id="health">Check Health</button>
    </div>
    <div class="row">
      <textarea id="contacts" rows="4" cols="60" placeholder='[{"contact_id":"c1","email_hash":"e#1","consent_sms":true}]'></textarea>
      <br />
      <input id="tenant" placeholder="tenant_id" value="t1" />
      <button id="import">Import Contacts</button>
    </div>
    <div class="row">
      <input id="contactId" placeholder="contact_id" value="c1" />
      <button id="cadence">Start Cadence</button>
    </div>
    <div class="row">
      <button id="simulate">Simulate Message</button>
      <button id="metrics">Get Metrics</button>
      <button id="stop">STOP (suppress)</button>
      <button id="soonest">Set Prefer: Soonest</button>
      <button id="share">Surface Share Prompt</button>
    </div>
    <pre id="out"></pre>
    <script>
      const api = (p, o={}) => fetch(p, o).then(r=>r.json());
      const out = document.getElementById('out');
      const log = (x) => out.textContent = JSON.stringify(x, null, 2);
      document.getElementById('health').onclick = async () => log(await api('/health'));
      document.getElementById('import').onclick = async () => {
        const tenant_id = document.getElementById('tenant').value;
        const contacts = JSON.parse(document.getElementById('contacts').value || '[]');
        log(await api('/import/contacts', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({tenant_id, contacts})}));
      };
      document.getElementById('cadence').onclick = async () => {
        const tenant_id = document.getElementById('tenant').value;
        const contact_id = document.getElementById('contactId').value;
        log(await api('/cadences/start', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({tenant_id, contact_id})}));
      };
      document.getElementById('simulate').onclick = async () => {
        const tenant_id = document.getElementById('tenant').value;
        const contact_id = document.getElementById('contactId').value;
        log(await api('/messages/simulate', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({tenant_id, contact_id})}));
      };
      document.getElementById('metrics').onclick = async () => log(await api('/metrics'));
      document.getElementById('stop').onclick = async () => {
        const tenant_id = document.getElementById('tenant').value;
        const contact_id = document.getElementById('contactId').value;
        log(await api('/consent/stop', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({tenant_id, contact_id})}));
      };
      document.getElementById('soonest').onclick = async () => {
        const tenant_id = document.getElementById('tenant').value;
        const contact_id = document.getElementById('contactId').value;
        log(await api('/notify-list/set-preference', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({tenant_id, contact_id, preference:'soonest'})}));
      };
      document.getElementById('share').onclick = async () => {
        const tenant_id = document.getElementById('tenant').value;
        log(await api('/share/surface', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({tenant_id, kind:'time_saved_10h'})}));
      };
    </script>
  </body>
  </html>


